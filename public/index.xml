<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Dev Log</title>
    
    
    
    <link>https://joeytat.github.io/</link>
    <description>Recent content on Dev Log</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 16 Jan 2022 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="https://joeytat.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Swift çŠ¶æ€ç®¡ç† â€”â€” å¦‚ä½•æ‹†åˆ†åºå¤§çš„ reducer</title>
      <link>https://joeytat.github.io/posts/combining_reducers/</link>
      <pubDate>Sun, 16 Jan 2022 00:00:00 +0000</pubDate>
      
      <guid>https://joeytat.github.io/posts/combining_reducers/</guid>
      <description>
        
          
          
          
        
        
        &lt;p&gt;å› ä¸ºé¡¹ç›®éœ€è¦ä½¿ç”¨ SwiftUIï¼Œæƒ³èµ·æ¥ä¹‹å‰ä¹°è¿‡å–µç¥çš„ &lt;a href=&#34;https://objccn.io/products/swift-ui&#34;&gt;ã€ŠSwiftUI ä¸ Combine ç¼–ç¨‹ã€‹&lt;/a&gt; ã€‚ä¹¦ä¸­ä»‹ç»äº† &lt;a href=&#34;https://redux.js.org&#34;&gt;Redux&lt;/a&gt; è¿™ä¸€åœ¨ Web å‰ç«¯é¢†åŸŸå¹¿æ³›è¢«éªŒè¯è¿‡çš„æ•°æ®ç®¡ç†æ¨¡å¼æ˜¯å¦‚ä½•é€šè¿‡ Swift æ¥å®ç°çš„ï¼Œéå¸¸æ¨è SwiftUI åˆè§è€…é˜…è¯»ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­è¿˜äº§ç”Ÿäº†ä¸€ä¸ªç–‘é—®ï¼Œå¦‚æœ reducer è¶Šæ¥è¶Šå¤§ï¼Œæœ‰ä»€ä¹ˆæ›´  â€œswiftâ€ çš„åŠæ³•èƒ½è§£å†³è¿™ä¸€é—®é¢˜å‘¢ï¼Ÿï¼ˆåœ¨ Redux.js ä¸­çš„åŸç”Ÿè§£å†³æ–¹æ¡ˆæ˜¯ &lt;a href=&#34;https://redux.js.org/usage/structuring-reducers/beyond-combinereducers&#34;&gt;&lt;code&gt;combineReducers&lt;/code&gt;&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;æ‹†åˆ†-reducer&#34;&gt;
  æ‹†åˆ† Reducer
  &lt;a href=&#34;#%e6%8b%86%e5%88%86-reducer&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆçœ‹çœ‹é—®é¢˜åœ¨ä»£ç ä¸­çš„è¡¨ç°æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œå‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ª reducerï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;appReducer&lt;/span&gt;(appState: &lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; AppState, action: AppAction) -&amp;gt; Void {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; action {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .emailValid(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; isValid):
        appState.settings.isEmailValid = isValid
        
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .register(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email, &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; password):
        appState.settings.loginUser = User(email, password)
    
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .login(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email, &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; password):
        appState.settings.loginUser = User(email, password)
    
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .logout:
        appState.settings.loginUser = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
        
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .loadPokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; result):
        appState.pokemonList.pokemons = result
        
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .favoratePokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; pokemon):
        appState.favoritePokemons.append(pokemon)
        
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .removeFavoritePokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; pokemon):
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; index = appState.favoritePokemons.indexOf(pokemon)
        appState.favoritePokemons.remove(at: index)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åº”ç”¨çš„ action ä¸»è¦åŒ…å«ä¸‰ä¸ªæ¨¡å—ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è´¦å·ç™»å½•æ³¨å†Œæ³¨é”€&lt;/li&gt;
&lt;li&gt;å¯¹ç¥å¥‡å®è´æ•°æ®è¿›è¡ŒåŠ è½½&lt;/li&gt;
&lt;li&gt;å¤„ç†å¯¹ç¥å¥‡å®è´æ•°æ®çš„æ”¶è—å’Œå–æ¶ˆæ”¶è—&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»è¿™æ®µä»£ç æˆ‘ä»¬å¾ˆå¿«å°±èƒ½å‘ç°ï¼Œå³ä½¿åªæ˜¯éå¸¸ç®€å•çš„ç¤ºä¾‹ä¹Ÿå·²ç»åŒ…å«äº†ä¸çŸ­çš„ä»£ç äº†ã€‚è¿™é‡Œè¿˜çœç•¥æ‰äº†å¤„ç†çŠ¶æ€æ—¶å¯èƒ½è¿˜éœ€è¦çš„å¼‚æ­¥ action çš„å¤„ç†ï¼ˆæ•°æ®åŠ è½½ç­‰ï¼‰ã€‚è¿™è¿˜ä»…ä»…åªæœ‰ä¸¤ä¸ªéå¸¸ç®€å•çš„ç•Œé¢çŠ¶æ€ï¼Œå½“é¢å¯¹çœŸå®çš„ app æ‰€éœ€è¦å¤„ç†çš„æ•°åä¸ªé¡µé¢çŠ¶æ€ä¼šæ›´ææ€–ã€‚&lt;/p&gt;
&lt;p&gt;å°† reducer æ‹†åˆ†æˆå¦‚ä¸‹ä¸‰ä¸ªç‹¬ç«‹ reducerï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;accountReducer&lt;/span&gt;(appState: &lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; AppState, action: AppAction) -&amp;gt; Void {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; action {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .emailValid(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; isValid):
        appState.settings.isEmailValid = isValid
        
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .register(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email, &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; password):
        appState.settings.loginUser = User(email, password)
    
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .login(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email, &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; password):
        appState.settings.loginUser = User(email, password)
    
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .logout:
        appState.settings.loginUser = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
        &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pokemonListReducer&lt;/span&gt;(appState: &lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; AppState, action: AppAction) -&amp;gt; Void {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; action {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .loadPokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; result):
        appState.pokemonList.pokemons = result

    &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
        &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
}
    

&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;favoritePokemonReducer&lt;/span&gt;(appState: &lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; AppState, action: AppAction) -&amp;gt; Void {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; action {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .favoratePokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; pokemon):
        appState.favoritePokemons.append(pokemon)
        
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .removeFavoritePokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; pokemon):
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; index = appState.favoritePokemons.indexOf(pokemon)
        appState.favoritePokemons.remove(at: index)

    &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
        &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
}
   
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å› ä¸ºå¯¹ reducer çš„æ•°é‡å¹¶ä¸ç¡®å®šï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨å¯å˜å‚æ•°æ¥æ„å»º &lt;code&gt;combine&lt;/code&gt; æ–¹æ³•ï¼Œå¯¹ä¼ å…¥çš„ reducer è¿›è¡Œéå†è°ƒç”¨å¤„ç† appStateã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;combine&lt;/span&gt;&amp;lt;Value, Action&amp;gt;(
  &lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; reducers: (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; Value, Action) -&amp;gt; Void...
) -&amp;gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; Value, Action) -&amp;gt; Void {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; { value, action &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; reducer &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; reducers {
      reducer(&amp;amp;value, action)
    }
  }
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; appReducer = combine(
  accountReducer,
  pokemonListReducer,
  favoritePokemonReducer
)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®Œæˆï¼Œæˆ‘ä»¬çš„å·¨å¤§ reducer è¢«æ‹†åˆ†æˆäº†ç‹¬ç«‹çš„ reducerï¼Œå†é€šè¿‡è‡ªå·±å®ç°çš„ combine æ–¹æ³•å®Œæˆäº†ç»„è£…ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éš”ç¦»-reducer-æ•°æ®&#34;&gt;
  éš”ç¦» reducer æ•°æ®
  &lt;a href=&#34;#%e9%9a%94%e7%a6%bb-reducer-%e6%95%b0%e6%8d%ae&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ä½†ä»”ç»†è§‚çœ‹ä»£ç è¿˜ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæ¯ä¸ª reducer éƒ½åªéœ€è¦å¤„ç† &lt;code&gt;appState&lt;/code&gt; ä¸Šçš„éƒ¨åˆ†æ•°æ®ï¼Œæ¯”å¦‚ &lt;code&gt;pokemonListReducer&lt;/code&gt; æ˜æ˜åªæ“ä½œäº† &lt;code&gt;appState.pokemonList&lt;/code&gt;ï¼Œæˆ‘ä»¬å´æŠŠæ•´ä¸ª state éƒ½ä¸¢ç»™äº†å®ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pokemonListReducer&lt;/span&gt;(appState: &lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; AppState, action: AppAction) -&amp;gt; Void {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; action {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .loadPokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; result):
        appState.pokemonList.pokemons = result

    &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
        &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¼šå¢åŠ ä»£ç ç»´æŠ¤ä¸Šçš„å›°éš¾ï¼Œä¸ç†Ÿæ‚‰ä»£ç çš„äººåœ¨ä¸æµè§ˆæ•´ä¸ª reducer ä¹‹å‰ï¼Œå¾ˆéš¾çŸ¥é“è¿™ä¸ª reducer åˆ°åº•æ“ä½œäº†å“ªäº›æ•°æ®ã€‚æ›´ç†æƒ³çš„ reducer å¯èƒ½é•¿è¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pokemonListReducer&lt;/span&gt;(value: &lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; PokemonList, action: AppAction) -&amp;gt; Void {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; action {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .loadPokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; result):
        value.pokemons = result &lt;span style=&#34;color:#75715e&#34;&gt;// ğŸ‘ˆ  åªèƒ½æ“ä½œ pokemonList&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
        &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åªæ˜¯è¿™æ ·æ”¹åŠ¨ä¹‹åï¼Œä¹‹å‰å®šä¹‰çš„ combine å°±æ— æ³•ç¼–è¯‘é€šè¿‡ï¼ŒpokemonListReducer çš„ç­¾åå·²ç»ä¸ç¬¦åˆ combine çš„è¦æ±‚äº†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Cannot convert value of type â€˜(inout PokemonList, AppAction) -&amp;gt; ()â€™ to expected argument&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;æ‹‰å›&#34;&gt;
  æ‹‰å›
  &lt;a href=&#34;#%e6%8b%89%e5%9b%9e&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;è§£å†³è¿™ä¸ªé—®é¢˜å¯ä»¥å¼•å…¥ä¸€ä¸ªæ•°å­¦ä¸­çš„æ¦‚å¿µ â€”â€” æ‹‰å›ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¼•ç”¨ wikipedia ä¸Šçš„è§£é‡Šï¼šâ€œç®€å•åœ°è¯´ï¼Œè®¾ &lt;em&gt;f&lt;/em&gt; æ˜¯ä¸€ä¸ªå˜é‡ &lt;em&gt;y&lt;/em&gt; çš„å‡½æ•°ï¼Œè¿™é‡Œ &lt;em&gt;y&lt;/em&gt; è‡ªèº«åˆæ˜¯å¦ä¸€ä¸ªå˜é‡ &lt;em&gt;x&lt;/em&gt; çš„å‡½æ•°ï¼Œé‚£ä¹ˆ &lt;em&gt;f&lt;/em&gt; å¯ä»¥å†™æˆ &lt;em&gt;x&lt;/em&gt; çš„å‡½æ•°ï¼Œè¿™å³ &lt;em&gt;f&lt;/em&gt; è¢«å‡½æ•° &lt;em&gt;y&lt;/em&gt;(&lt;em&gt;x&lt;/em&gt;) æ‹‰å›ã€‚â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨ reducer ä¸­çš„ä¾‹å­é‡Œï¼Œä¹Ÿå¯ä»¥å¥—ç”¨ç›¸åŒçš„æ¦‚å¿µã€‚åªéœ€è¦å°†æŒæœ‰äº†éƒ¨åˆ†çŠ¶æ€æ•°æ®çš„ reducerï¼Œè½¬åŒ–æˆä¸€ä¸ªæ‹¥æœ‰ç€å…¨éƒ¨çŠ¶æ€æ•°æ®çš„ reducer ç­¾åå³å¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pullback&lt;/span&gt;&amp;lt;LocalValue, GlobalValue, Action&amp;gt;(
  &lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; reducer: @escaping (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; LocalValue, Action) -&amp;gt; Void,
  &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;: @escaping (GlobalValue) -&amp;gt; LocalValue,
  &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;: @escaping (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; GlobalValue, LocalValue) -&amp;gt; Void
) -&amp;gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; GlobalValue, Action) -&amp;gt; Void {

  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;  { globalValue, action &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; localValue = &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;(globalValue)
    reducer(&amp;amp;localValue, action)
    &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;(&amp;amp;globalValue, localValue)
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯¥å‡½æ•°åŒ…å«ä¸‰ä¸ªå…¥å‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨äºå¤„ç†å±€éƒ¨çŠ¶æ€çš„ reducer&lt;/li&gt;
&lt;li&gt;æä¾›ä»å…¨éƒ¨çŠ¶æ€ä¸­æå–éƒ¨åˆ†çŠ¶æ€çš„å‡½æ•°&lt;/li&gt;
&lt;li&gt;æä¾›å°†å±€éƒ¨çŠ¶æ€è®¾ç½®åˆ°å…¨éƒ¨çŠ¶æ€ä¸­çš„å‡½æ•°&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªå¯ä»¥ç”¨æ¥è½¬åŒ–ç”¨äºå¤„ç†å±€éƒ¨çŠ¶æ€ reducer åˆ°å…¨éƒ¨çŠ¶æ€ reducer çš„ pullback å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;pullback(pokemonListReducer,
         &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;: { $0.pokemonList },
         &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;: { $0.pokemonList = $1 }
         )
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†è¿›ä¸€æ­¥è¿˜å¯ä»¥é€šè¿‡ keyPath æ¥ä¼˜åŒ– pullback å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pullback&lt;/span&gt;&amp;lt;LocalValue, GlobalValue, Action&amp;gt;(
  &lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; reducer: @escaping (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; LocalValue, Action) -&amp;gt; Void,
  value: WritableKeyPath&amp;lt;GlobalValue, LocalValue&amp;gt;
) -&amp;gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; GlobalValue, Action) -&amp;gt; Void {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; { globalValue, action &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
    reducer(&amp;amp;globalValue[keyPath: value], action)
  }
}

      
pullback(pokemonListReducer, value: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;AppState.pokemonList)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·å°±å®ç°äº† reducer çš„æ‹†åˆ†ä»¥åŠå¯¹å¤„ç†çŠ¶æ€çš„éš”ç¦»&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; appReducer = combine(
  pullback(accountReducer, value: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.pokemonList),
  pullback(pokemonListReducer, value: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.settings),
  pullback(favoritePokemonReducer, value: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.favoritePokemons)
)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;
  å‚è€ƒèµ„æ–™
  &lt;a href=&#34;#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://objccn.io/products/swift-ui&#34;&gt;ObjC ä¸­å›½ - SwiftUI ä¸ Combine ç¼–ç¨‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.pointfree.co/collections/composable-architecture/reducers-and-stores/ep69-composable-state-management-state-pullbacks#downloads&#34;&gt;Point Free - StateÂ Pullbacks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.swiftbysundell.com/articles/the-power-of-key-paths-in-swift/&#34;&gt;Swift by Sundell - The power of key paths in Swift&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

        
        </description>
    </item>
    
    <item>
      <title>SwiftUI çŠ¶æ€ç®¡ç† â€”â€” Composible Binding</title>
      <link>https://joeytat.github.io/posts/composible_binding/</link>
      <pubDate>Mon, 03 Jan 2022 00:00:00 +0000</pubDate>
      
      <guid>https://joeytat.github.io/posts/composible_binding/</guid>
      <description>
        
          
          
          
        
        
        &lt;p&gt;åœ¨ SwiftUI ä¸­ï¼Œéœ€è¦é€šè¿‡æ•°æ®æ¥é©±åŠ¨ UI çš„å˜åŒ–ã€‚æ•°æ®ç»“æ„æŠ½è±¡æè¿°çš„è´¨é‡ä¹Ÿå½±å“ç€æˆ‘ä»¬å¯¹ SwiftUI ç•Œé¢çš„ç»´æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;é€šå¸¸æ•°æ®ä¸­å¯èƒ½å­˜åœ¨å¾ˆå¤šçŠ¶æ€ï¼Œå¦‚æœä½¿ç”¨å¾ˆå¤šçš„ boolean å€¼æ¥æè¿°è¿™äº›çŠ¶æ€ï¼Œé‚£ä¹ˆ App çš„å¯ç»´æŠ¤æ€§å¯èƒ½ä¼šå¤§å¤§é™ä½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç®¡ç†ç‹¬ç«‹çŠ¶æ€çš„é—®é¢˜&#34;&gt;
  ç®¡ç†ç‹¬ç«‹çŠ¶æ€çš„é—®é¢˜
  &lt;a href=&#34;#%e7%ae%a1%e7%90%86%e7%8b%ac%e7%ab%8b%e7%8a%b6%e6%80%81%e7%9a%84%e9%97%ae%e9%a2%98&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª Appï¼Œç”¨æˆ·å¯ä»¥åœ¨ç™»å½•ä¸éç™»å½•çŠ¶æ€ä¸‹è¿›è¡Œæ“ä½œã€‚æ‰€ä»¥æˆ‘ä»¬çš„ç•Œé¢éœ€è¦å…¼å®¹è¿™ä¸¤ç§çŠ¶æ€ï¼Œå…¶æè¿°å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AppState&lt;/span&gt;: ObservableObject {
  @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; user: User? = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
  @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; error: Error? = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
  
  &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; authenticated: Bool { user &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; }
  &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; hasError: Bool { error &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åŸºäºè¿™æ ·çš„çŠ¶æ€æè¿°ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªä»…å±•ç¤ºç”¨æˆ·åçš„ç»„ä»¶å¤§æ¦‚ä¼šæ˜¯è¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
    Group {
      &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; state.hasError {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Oops, sth went wrong: &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;state.error!.localizedDescription&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
      }
      &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; state.authenticated {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;state.user?.name ?? &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Unknown&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;!&amp;#34;&lt;/span&gt;)
      } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello, stranger&amp;#34;&lt;/span&gt;)
      }
    }
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç²—çœ‹æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå®é™…ä¸Šåœ¨ç»´æŠ¤è¿™æ ·çš„æ•°æ®ç»“æ„æ—¶å°±éœ€è¦æ ¼å¤–å°å¿ƒäº†ã€‚æ¯”å¦‚ç¬¬ä¸€æ¬¡æˆ‘ä»¬ç™»å½•å¤±è´¥ï¼Œä¸ºäº†å±•ç¤ºé”™è¯¯ä¿¡æ¯ç»™ &lt;code&gt;error&lt;/code&gt; è®¾ç½®äº†å€¼ä¹‹åã€‚å¿…é¡»åœ¨ç™»å½•æˆåŠŸä¹‹åè¦åŠæ—¶åœ°å»æ¸…ç©º errorï¼Œå¦åˆ™å³ä½¿ &lt;code&gt;state.authenticated&lt;/code&gt; ç­‰äº &lt;code&gt;true&lt;/code&gt;ï¼Œç”¨æˆ·ä¾ç„¶æ— æ³•çœ‹åˆ°æ­£ç¡®çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿™è¿˜ä»…ä»…æ˜¯æœ‰ä¸¤ä¸ªçŠ¶æ€çš„æƒ…å†µä¸‹ï¼Œåƒè¿™æ ·ç‹¬ç«‹çŠ¶æ€å±æ€§ä¼šå¸¦æ¥å¾ˆå¤§çš„ç»´æŠ¤æˆæœ¬ï¼Œå¼€å‘è€…éœ€è¦ç‰¢è®°å„ä¸ªå±æ€§ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç”šè‡³ç¼–å†™ç•Œé¢çš„æ—¶å€™ï¼Œè¿˜éœ€è¦æ³¨æ„ä»£ç æ‰§è¡Œé¡ºåºã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¼•å…¥çŠ¶æ€æœº&#34;&gt;
  å¼•å…¥çŠ¶æ€æœº
  &lt;a href=&#34;#%e5%bc%95%e5%85%a5%e7%8a%b6%e6%80%81%e6%9c%ba&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æŠŠçŠ¶æ€æŠ½è±¡æˆå¸¦æœ‰ associated values çš„ enum æ˜¯ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼Œæ¯”å¦‚:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AppState&lt;/span&gt;: ObservableObject  {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;enum&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AccountState&lt;/span&gt; {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; authenticated(User)
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; unauthenticated
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; error(Error)
  }
  @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; accountState: AccountState = .unauthenticated
}

&lt;span style=&#34;color:#75715e&#34;&gt;// ç•Œé¢ä¸­çš„ä½¿ç”¨&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
  VStack {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; state.accountState {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .authenticated(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; user):
      Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;user.name&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;!&amp;#34;&lt;/span&gt;)
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .unauthenticated:
      Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;unregister&amp;#34;&lt;/span&gt;)
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .error(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; error):
      Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Oops, sth went wrong: &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;error.localizedDescription&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·è¢«çŠ¶æ€æœºé©±åŠ¨çš„ç•Œé¢çœ‹èµ·æ¥è¦ç›´è§‚å¤šäº†ã€‚å¹¶ä¸”åœ¨æ¯ä¸ªçŠ¶æ€ä¸­å¯¹æ•°æ®çš„æ“ä½œï¼Œä¹Ÿç”± enum èµ‹äºˆäº†éš”ç¦»èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åŒå‘ç»‘å®šæ€ä¹ˆåŠ&#34;&gt;
  åŒå‘ç»‘å®šæ€ä¹ˆåŠï¼Ÿ
  &lt;a href=&#34;#%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a%e6%80%8e%e4%b9%88%e5%8a%9e&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ä½†è¿™æ ·åšåˆæ¥å¸¦ä¸ªæ–°çš„é—®é¢˜ï¼Œç°åœ¨æ²¡åŠæ³•ç›´æ¥é€šè¿‡ &lt;code&gt;$&lt;/code&gt; æ¥è·å– Binding wrapper æ¥ä¿®æ”¹çŠ¶æ€ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; state.accountState {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .authenticated(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; user):
      Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;user.name&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;!&amp;#34;&lt;/span&gt;)
	  TextField(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Change username&amp;#34;&lt;/span&gt;, text: &amp;lt;Binding&amp;lt;String&amp;gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;) 
      &lt;span style=&#34;color:#75715e&#34;&gt;// ä¸æ”¯æŒå¡«å…¥ self.$state.accountState.name ğŸ‘†&lt;/span&gt;
	...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;Xcode ä¼šæç¤º: dynamic member &amp;lsquo;name&amp;rsquo; using key path from root type &amp;lsquo;AppState.AccountState&amp;rsquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆå½“æ“ä½œå¯¹è±¡æ˜¯ class æ—¶ï¼Œæ˜¯å¯ä»¥åšåˆ°é€šè¿‡
&lt;code&gt;self.$state.user.name&lt;/code&gt; æ¥è·å–åˆ° name å±æ€§çš„ Binding å°è£…çš„ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&#34;å®ç°åŠ¨æ€æˆå‘˜æŸ¥æ‰¾dynamic-member-lookup&#34;&gt;
  å®ç°åŠ¨æ€æˆå‘˜æŸ¥æ‰¾(dynamic member lookup)
  &lt;a href=&#34;#%e5%ae%9e%e7%8e%b0%e5%8a%a8%e6%80%81%e6%88%90%e5%91%98%e6%9f%a5%e6%89%bedynamic-member-lookup&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;å› ä¸º Enum è¿˜ä¸æ”¯æŒåŠ¨æ€æˆå‘˜æŸ¥æ‰¾ç‰¹æ€§ã€‚ä»€ä¹ˆæ˜¯åŠ¨æ€æˆå‘˜æŸ¥æ‰¾ï¼Ÿç®€è€Œè¨€ä¹‹å°±æ˜¯é€šè¿‡  &lt;code&gt;\&lt;/code&gt; æ¥è·å–åˆ°æˆå‘˜å±æ€§çš„ &lt;code&gt;KeyPath&lt;/code&gt; å°è£…ï¼ˆ&lt;a href=&#34;https://www.swiftbysundell.com/articles/the-power-of-key-paths-in-swift/&#34;&gt;ä»€ä¹ˆåˆæ˜¯ KeyPath&lt;/a&gt;ï¼Ÿï¼‰ï¼Œç„¶åå°†å…¶è½¬åŒ–ä¸ºå¯¹åº”çš„ Binding å°è£…ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;extension&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Binding&lt;/span&gt; {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;transform&lt;/span&gt;&amp;lt;LocalValue&amp;gt;(
    &lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; keyPath: WritableKeyPath&amp;lt;Value, LocalValue&amp;gt;
  ) -&amp;gt; Binding&amp;lt;LocalValue&amp;gt; {
    Binding&amp;lt;LocalValue&amp;gt;(
      &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;: { 
        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.wrappedValue[keyPath: keyPath]
      },
      &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;: { localValue &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.wrappedValue[keyPath: keyPath] = localValue 
      }
    )
  }
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;state.accountState.username
&lt;span style=&#34;color:#75715e&#34;&gt;// ç­‰ä»·äº &lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;state.transform(&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;accountState).transform(&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;username)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰€ä»¥æ¥ä¸‹æ¥åªéœ€è¦ä¸º enum æ·»åŠ åŠ¨æ€æˆå‘˜æŸ¥æ‰¾çš„æ”¯æŒå°±å¯ä»¥äº†&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;extension&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Binding&lt;/span&gt; {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unwrap&lt;/span&gt;&amp;lt;Wrapped&amp;gt;() -&amp;gt; Binding&amp;lt;Wrapped&amp;gt;? &lt;span style=&#34;color:#66d9ef&#34;&gt;where&lt;/span&gt; Value == Wrapped? {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; value = &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.wrappedValue &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Binding&amp;lt;Wrapped&amp;gt;(
      &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;: { value },
      &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;: { &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.wrappedValue = $0 }
    )
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åå†åˆ° enum é‡Œæ·»åŠ ä¸€ä¸ªè®¡ç®—å±æ€§æ–¹ä¾¿æˆ‘ä»¬è·å–&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;enum&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AccountState&lt;/span&gt; {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; loggedIn(User)
  &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; unregister
  &lt;span style=&#34;color:#75715e&#34;&gt;//&lt;/span&gt;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; username: String? {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt; {
      &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .loggedIn(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; user) = &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
      }
      &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; user.username
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt; {
      &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .loggedIn(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; user) = &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;,
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; newValue = newValue &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; }
      user.username = newValue
      &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt; = .loggedIn(user)
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç°åœ¨å°±å¯ä»¥åœ¨ SwiftUI ä¸­å¯¹ enum ä½¿ç”¨ç»‘å®šäº†&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; username = &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;state.accountState.username.unwrap() {
  TextField(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Change username&amp;#34;&lt;/span&gt;, text: username)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;çœ‹èµ·æ¥è¿˜æ˜¯æœ‰äº›éº»çƒ¦ï¼Œå¯¹äºæ¯ä¸ªè¦ä½¿ç”¨ Binding çš„å±æ€§éƒ½éœ€è¦å»å†™ä¸€ä¸ªè®¡ç®—å±æ€§æ¥åŒ…è£…ä¸€å±‚ã€‚è¿™æ ·æ˜¾ç„¶è¿™å¹¶ä¸å¦‚ &lt;code&gt;KeyPath&lt;/code&gt; é‚£æ ·ï¼Œç›´æ¥é€šè¿‡ &lt;code&gt;self.$state.accountState[\.authenticated]&lt;/code&gt; æ¥è·å–åˆ° enum ä¸­ associated value çš„ Binding åŒ…è£…æ¥å¾—æ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ Swift ç›®å‰ä¸æ”¯æŒï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥é€šè¿‡å¼•å…¥ &lt;a href=&#34;https://github.com/pointfreeco/swift-case-paths&#34;&gt;CasePaths&lt;/a&gt; è¿™ä¸ªç¬¬ä¸‰æ–¹ä¾èµ–æ¥å®ç°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CasePaths&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;enum&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AccountState&lt;/span&gt; {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; authenticated(User)
  &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; unauthenticated
  &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; error(Error)
&lt;span style=&#34;color:#75715e&#34;&gt;// è®¡ç®—å±æ€§å¯ä»¥åˆ é™¤æ‰äº†&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//    var username: String? {&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//      get {&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//        guard case .authenticated(let user) = self else {&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//          return nil&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//        }&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//        return user.name&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//      }&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//      set {&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//        guard case .authenticated(let user) = self,&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//              let newValue = newValue else { return }&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//        user.name = newValue&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//        self = .authenticated(user)&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//      }&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//    }&lt;/span&gt;
}

&lt;span style=&#34;color:#75715e&#34;&gt;// ç•Œé¢ä¸­ç›´æ¥ä½¿ç”¨ CasePath&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; user = &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;state.accountState.matching(&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;.authenticated) {
  TextField(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Change username&amp;#34;&lt;/span&gt;, text: user.name)
}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”±æ­¤ä¸º Enum ä¹Ÿå¢åŠ äº†ä¸ Structã€Class ç­‰æ•ˆçš„ KeyPath æ”¯æŒï¼Œä»è€Œä½¿å¾—æ–‡ç« å¼€å¤´ç”¨ Enum ä½œä¸º SwiftUI çš„çŠ¶æ€æœºç®¡ç†å·¥å…·æ›´ä¾¿æ·äº†ä¸€äº›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;
  å‚è€ƒèµ„æ–™
  &lt;a href=&#34;#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kentcdodds.com/blog/stop-using-isloading-booleans&#34;&gt;Stop using isLoading booleans&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.swiftbysundell.com/articles/the-power-of-key-paths-in-swift/&#34;&gt;The power of key paths in Swift&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.pointfree.co/collections/swiftui/composable-bindings/ep107-composable-swiftui-bindings-the-problem&#34;&gt;Composable SwiftUI Bindings: TheÂ Problem&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

        
        </description>
    </item>
    
    <item>
      <title>JavaScript æ—¢ç„¶æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œä¸ºä»€ä¹ˆ setTimeout ä¸ä¼šé˜»å¡çº¿ç¨‹ï¼Ÿ</title>
      <link>https://joeytat.github.io/posts/asynchronous-javascript/</link>
      <pubDate>Mon, 19 Aug 2019 00:00:00 +0000</pubDate>
      
      <guid>https://joeytat.github.io/posts/asynchronous-javascript/</guid>
      <description>
        
          
          
          
        
        
        &lt;p&gt;å…ˆçœ‹ä¸‹é¢çš„ä»£ç &lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;printHello&lt;/span&gt;() {
  &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello&amp;#34;&lt;/span&gt;);
}
&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;printWorld&lt;/span&gt;() {
  &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;World&amp;#34;&lt;/span&gt;);
}
&lt;span style=&#34;color:#a6e22e&#34;&gt;printHello&lt;/span&gt;(); &lt;span style=&#34;color:#75715e&#34;&gt;// è¾“å‡º Hello
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;printWorld&lt;/span&gt;(); &lt;span style=&#34;color:#75715e&#34;&gt;// è¾“å‡º World 
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ JavaScript ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªå…¨å±€è°ƒç”¨æ ˆ(Global Call Stack)ã€‚å½“æˆ‘ä»¬è°ƒç”¨ &lt;code&gt;printHello&lt;/code&gt; æ—¶ï¼Œä¼šå°†è¯¥æ–¹æ³•åŠ å…¥åˆ°æ ˆä¸­ï¼Œç”±äº JavaScript æ˜¯å•çº¿ç¨‹æ‰§è¡Œæœºåˆ¶ï¼ˆåŒä¸€æ—¶é—´åªæ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼‰ï¼Œæ‰€ä»¥ä¼šåœ¨æ‰§è¡Œå®Œæˆäº† &lt;code&gt;printHello&lt;/code&gt; ä¹‹åå†æ‰§è¡Œ &lt;code&gt;printWorld&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆç°åœ¨å°±å¼•å…¥æ ‡é¢˜ä¸­çš„é—®é¢˜ï¼Œ&lt;strong&gt;JavaScript æ—¢ç„¶æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œä¸ºä»€ä¹ˆ setTimeout ä¸ä¼šé˜»å¡çº¿ç¨‹ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;printHello&lt;/span&gt;() {
  &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello&amp;#34;&lt;/span&gt;);
}
&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;printWorld&lt;/span&gt;() {
  &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;World&amp;#34;&lt;/span&gt;);
}
&lt;span style=&#34;color:#a6e22e&#34;&gt;setTimeout&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;printHello&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;);
&lt;span style=&#34;color:#a6e22e&#34;&gt;printWorld&lt;/span&gt;();
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¡¨é¢ä¸Šæ¥çœ‹ &lt;code&gt;setTimeout&lt;/code&gt; ä¹Ÿæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œä»–çš„å®šä¹‰å¯èƒ½æ˜¯è¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;setTimeout&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;callbackFunc&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;interval&lt;/span&gt;) {
  &lt;span style=&#34;color:#75715e&#34;&gt;// ....
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é‚£ä¹ˆæŒ‰ç…§ JS å•çº¿ç¨‹ç†è®ºæ¥è¯´ï¼Œåº”è¯¥æ˜¯å…ˆå°† &lt;code&gt;setTimeout&lt;/code&gt; æ–¹æ³•å‹å…¥å…¨å±€è°ƒç”¨æ ˆï¼Œå¹¶ä¸”æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œç­‰å¾… 1 ç§’é’Ÿï¼Œç„¶åå†æ‰§è¡Œ &lt;code&gt;printWorld&lt;/code&gt; æ‰å¯¹ã€‚ä½†å®é™…ä¸Šæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ‰“å°çš„ç»“æœä¼šæ˜¯ &amp;ldquo;World&amp;rdquo; ç„¶å &amp;ldquo;Hello&amp;rdquo;ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;h3 id=&#34;web-browser-api---callback-queue&#34;&gt;
  Web Browser API &amp;amp;  Callback Queue
  &lt;a href=&#34;#web-browser-api---callback-queue&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;äº‹å®ä¸Š &lt;code&gt;setTimeout&lt;/code&gt; å¹¶ä¸æ˜¯å®Œå…¨æ˜¯ JS  ä»£ç ï¼Œè€Œæ˜¯å±äº &lt;strong&gt;Web Browser API&lt;/strong&gt; ä¸­çš„æ–¹æ³•ã€‚å°±åƒåå­—ä¸­æ‰€æŒ‡çš„é‚£æ ·ï¼Œ JS è°ƒç”¨äº† &lt;code&gt;setTimeout&lt;/code&gt; ä¹‹åï¼Œæµè§ˆå™¨ï¼ˆWeb Browserï¼‰ä¼šå»åˆ›å»ºä¸€ä¸ª timerï¼ŒåŒæ—¶å°†æˆ‘ä»¬ä¼ å…¥ &lt;code&gt;setTimeout&lt;/code&gt; çš„æ–¹æ³• - &lt;code&gt;printHello&lt;/code&gt; åŠ å…¥åˆ° &lt;strong&gt;Callback Queueï¼ˆå›è°ƒé˜Ÿåˆ—ï¼‰&lt;/strong&gt; ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;1000 æ¯«ç§’è¿‡å»åï¼Œæµè§ˆå™¨ä¼šé€šçŸ¥ JavaScript å¼•æ“å°†å›è°ƒé˜Ÿåˆ—ä¸­çš„ &lt;code&gt;printHello&lt;/code&gt; åŠ å…¥åˆ° JS çš„å…¨å±€è°ƒç”¨æ ˆä¸­æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥åœ¨ JS çš„å…¨å±€è°ƒç”¨æ ˆçœ‹æ¥ï¼Œæ˜¯å…ˆæœ‰ä¸€ä¸ª &lt;code&gt;printWorld&lt;/code&gt; åŠ å…¥åˆ°äº†è°ƒç”¨æ ˆï¼Œè¿‡äº† 1000 æ¯«ç§’ä¹‹åï¼ŒåˆåŠ å…¥äº†ä¸€ä¸ª &lt;code&gt;printHello&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;é‚£å¦‚æœæˆ‘ä»¬çš„ &lt;code&gt;printWorld&lt;/code&gt; ä¹‹åè¿˜æœ‰å…¶ä»–çš„æ–¹æ³•æ‰§è¡Œæ—¶é—´è¶…è¿‡äº† 1000 æ¯«ç§’å‘¢ï¼Ÿ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/// çœç•¥æ‰ printHello å’Œ printWorld å®šä¹‰
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;heavyWork&lt;/span&gt;() {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1000000&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;) {
      &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Heavy Work&amp;#34;&lt;/span&gt;); 
    }
}

&lt;span style=&#34;color:#a6e22e&#34;&gt;setTimeout&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;printHello&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;);
&lt;span style=&#34;color:#a6e22e&#34;&gt;printWorld&lt;/span&gt;();
&lt;span style=&#34;color:#a6e22e&#34;&gt;heavyWork&lt;/span&gt;(); &lt;span style=&#34;color:#75715e&#34;&gt;// å‡è®¾ä¼šæ‰§è¡Œ 2000ms
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç°åœ¨è®©æˆ‘ä»¬å‡è®¾ &lt;code&gt;heavyWork&lt;/code&gt; æ–¹æ³•ä¼šæ‰§è¡Œ 2000msï¼Œå¯æ˜¯æˆ‘ä»¬çš„ &lt;code&gt;setTimeout&lt;/code&gt; åªä¼šæ‰§è¡Œ 1000msï¼Œé‚£ä¹ˆæŒ‰ç…§ä¸Šé¢çš„ç†è®ºï¼Œ1000ms åˆ°äº†ä¹‹åï¼Œ&lt;code&gt;printHello&lt;/code&gt; ä¼šè¢«åŠ å…¥åˆ° JS çš„è°ƒç”¨æ ˆä¸­æ‰§è¡Œï¼Œé‚£ç°åœ¨çš„è¾“å‡ºä¼šæ˜¯ä¸€å †â€œHeavy Workâ€ä¹‹ä¸­å¤¹å¸¦ç€ä¸€ä¸ªâ€œHelloâ€å—ï¼Ÿ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;World&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;Heavy&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Work&lt;/span&gt;
...
&lt;span style=&#34;color:#a6e22e&#34;&gt;Hello&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// ä¼šè¾“å‡ºä¸€å † Heavy Work ä¸­å¤¹å¸¦ä¸€ä¸ª Hello å—ï¼Ÿ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;...
&lt;span style=&#34;color:#a6e22e&#34;&gt;Heavy&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Work&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å½“ç„¶ä¸ä¼šå•¦ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰ Event Loopï¼ˆäº‹ä»¶å¾ªç¯æœºåˆ¶ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;event-loop&#34;&gt;
  Event Loop
  &lt;a href=&#34;#event-loop&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;Event Loop å…¶å®ç†è§£èµ·æ¥éå¸¸ç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªå¾ªç¯ä¼šä¸åœåœ°æ£€æŸ¥ JS è°ƒç”¨æ ˆã€‚åªæœ‰åœ¨ JS è°ƒç”¨æ ˆ&lt;strong&gt;æ²¡æœ‰ä»»åŠ¡&lt;/strong&gt;çš„æƒ…å†µä¸‹ï¼ŒCallback Queue ä¸­çš„ä»»åŠ¡ï¼Œæ‰ä¼šè¢«æ·»åŠ åˆ° JS è°ƒç”¨æ ˆã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ&lt;code&gt;setTimeout&lt;/code&gt; è™½ç„¶æŒ‡å®šäº† 1000ms ä¹‹åå°±æ‰§è¡Œ &lt;code&gt;printHello&lt;/code&gt;ï¼Œä½†å®é™…ä¸Šä¼šè¢«éœ€è¦æ‰§è¡Œ 2000ms çš„ &lt;code&gt;heavyWork&lt;/code&gt;é˜»å¡ä½ï¼Œ è¾“å‡ºçš„ç»“æœä¼šæ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;World&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;Heavy&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Work&lt;/span&gt;
.... &lt;span style=&#34;color:#75715e&#34;&gt;// é•¿è¾¾ 2000ms çš„ Heavy Work
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Heavy&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Work&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;Hello&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ€»ç»“&#34;&gt;
  æ€»ç»“
  &lt;a href=&#34;#%e6%80%bb%e7%bb%93&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Web Browser API&lt;br&gt;
æä¾›ç»™æˆ‘ä»¬ JavaScript æ‰€æ²¡æœ‰åå°è¿è¡Œä»»åŠ¡çš„èƒ½åŠ›ï¼Œé™¤äº† &lt;code&gt;setTimeout&lt;/code&gt; å’Œ &lt;code&gt;setInterval&lt;/code&gt; è¿™æ ·åˆ›å»º timer çš„ API ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬äº† Ajaxï¼Œç”¨æˆ·äº¤äº’ï¼Œæ–‡ä»¶è¯»å†™ç­‰æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;Callback Queue&lt;br&gt;
ç”¨äºæŒæœ‰æäº¤åˆ° Web Browser API ä¸­ç­‰å¾…å›è°ƒçš„ callbackã€‚&lt;/li&gt;
&lt;li&gt;Event Loop&lt;br&gt;
ä¸€ä¸ªä¸åœåœ°æ£€æŸ¥ JavaScript è°ƒç”¨æ ˆä¸­æ˜¯å¦è¿˜æœ‰ä»»åŠ¡çš„å¾ªç¯ã€‚&lt;/li&gt;
&lt;/ul&gt;

        
        </description>
    </item>
    
    <item>
      <title>React è¿›é˜¶æ¨¡å¼ä¹‹å¤åˆç»„ä»¶ï¼ˆCompound Componentï¼‰</title>
      <link>https://joeytat.github.io/posts/compound-component/</link>
      <pubDate>Mon, 12 Aug 2019 00:00:00 +0000</pubDate>
      
      <guid>https://joeytat.github.io/posts/compound-component/</guid>
      <description>
        
          
          
          
        
        
        &lt;h3 id=&#34;å¤åˆç»„ä»¶æ˜¯ä»€ä¹ˆ&#34;&gt;
  å¤åˆç»„ä»¶æ˜¯ä»€ä¹ˆ
  &lt;a href=&#34;#%e5%a4%8d%e5%90%88%e7%bb%84%e4%bb%b6%e6%98%af%e4%bb%80%e4%b9%88&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ç¼–å†™é¡µé¢æ—¶ï¼Œç»å¸¸å­˜åœ¨å¤šä¸ªå­ç»„ä»¶çš„å±•ç¤ºï¼Œæ˜¯ä¾èµ–äºåŒä¸€ä¸ªæ•°æ®æºçš„æƒ…å†µã€‚
æ¯”å¦‚å•é€‰æ¡†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switcher&lt;/span&gt;&amp;gt;
    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switch&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;on&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;props&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;React&amp;#39;&lt;/span&gt;}&amp;gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;React&lt;/span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;Switch&lt;/span&gt;&amp;gt;
    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switch&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;on&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;props&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Vue&amp;#39;&lt;/span&gt;}&amp;gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Vue&lt;/span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;Switch&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;Switcher&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰çš„ &lt;code&gt;Switch&lt;/code&gt; çš„æ•°æ®éƒ½éœ€è¦å¯¹ &lt;code&gt;selecting&lt;/code&gt; çš„å€¼è¿›è¡Œåˆ¤æ–­ï¼Œå¹¶ä¸”ä»£ç ä¸­å…¶å®åªæœ‰ &lt;code&gt;this.props.selecting ==&lt;/code&gt; åé¢çš„éƒ¨åˆ†ä¸åŒï¼Œå¦‚æœèƒ½æ”¹å†™æˆè¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Switcher&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;React&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ({&lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt;}) =&amp;gt; (
  &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switch&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;on&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;===&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;React&amp;#39;&lt;/span&gt;}&amp;gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;React&lt;/span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;Switch&lt;/span&gt;&amp;gt;
)
&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Switcher&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Vue&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ({&lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt;}) =&amp;gt; (
  &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switch&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;on&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;===&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Vue&amp;#39;&lt;/span&gt;}&amp;gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Vue&lt;/span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;Switch&lt;/span&gt;&amp;gt;
)

&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switcher&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;props&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt;}&amp;gt;
    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switcher.React&lt;/span&gt;/&amp;gt;
    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switcher.Vue&lt;/span&gt;/&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;Switcher&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;éšå¼åœ°å°†çˆ¶ç»„ä»¶çš„æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå…¶æ˜¾ç¤ºé€»è¾‘äº¤ç”±ç»™å­ç»„ä»¶è‡ªè¡Œå¤„ç†ï¼Œä»£ç çš„ç»„ç»‡ç»“æ„å°†ä¼šæ¸…æ™°å¾ˆå¤šã€‚åç»­å³ä½¿éœ€æ±‚å˜åŠ¨ï¼Œæ•°æ®çš„ä¼ é€’æ”¹å˜ä¹Ÿå¹¶ä¸éœ€è¦æˆ‘ä»¬æ“å¿ƒï¼ˆä¸éœ€è¦ä¸€ä¸ªå­ç»„ä»¶ä¸€ä¸ªå­ç»„ä»¶åœ°æ·»åŠ ä¼ é€’ï¼‰ï¼Œåªéœ€è¦ä¿®æ”¹ &lt;code&gt;Switcher&lt;/code&gt; å­æ§ä»¶å†…éƒ¨å¤„ç†é€»è¾‘å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆè¦æ€ä¹ˆå®ç°è¿™ä¸ª&lt;strong&gt;éšå¼æ•°æ®ä¼ é€’&lt;/strong&gt;å‘¢ï¼Ÿ å¯ä»¥é€šè¿‡ &lt;a href=&#34;https://reactjs.org/docs/react-api.html#reactchildren&#34;&gt;&lt;code&gt;React.Children.map&lt;/code&gt;&lt;/a&gt; å’Œ &lt;a href=&#34;https://reactjs.org/docs/react-api.html#cloneelement&#34;&gt;&lt;code&gt;React.cloneElement&lt;/code&gt;&lt;/a&gt; è¿™ä¸¤ä¸ª API æ¥å®ç°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;reactchildrenmap-ä¸-reactcloneelement&#34;&gt;
  React.Children.map ä¸ React.cloneElement
  &lt;a href=&#34;#reactchildrenmap-%e4%b8%8e-reactcloneelement&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;åœ¨ &lt;code&gt;render&lt;/code&gt; ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨  &lt;code&gt;React.Children.map&lt;/code&gt; æ¥è·å–åˆ° &lt;code&gt;Switcher&lt;/code&gt; ä¸­çš„å­ç»„ä»¶ï¼Œç„¶åé€šè¿‡ &lt;code&gt;React.cloneElement&lt;/code&gt; å¯¹ç»„ä»¶è¿›è¡Œå…‹éš†åŠæ•°æ®ä¼ é€’ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;render&lt;/span&gt;() {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;React&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Children&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;map&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;props&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;children&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;child&lt;/span&gt; =&amp;gt;
      &lt;span style=&#34;color:#a6e22e&#34;&gt;React&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cloneElement&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;child&lt;/span&gt;, {
        &lt;span style=&#34;color:#a6e22e&#34;&gt;on&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;state&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;on&lt;/span&gt;,
        &lt;span style=&#34;color:#a6e22e&#34;&gt;toggle&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;toggle&lt;/span&gt;,
      }),
    )
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·ï¼Œå³ä½¿æˆ‘ä»¬åœ¨ä½¿ç”¨ &lt;code&gt;Switcher.React&lt;/code&gt; å’Œ &lt;code&gt;Switcher.Vue&lt;/code&gt; æ—¶ï¼Œæ²¡æœ‰æ˜¾å¼åœ°ä¼ é€’å‚æ•°ï¼Œå­ç»„ä»¶ä¹Ÿèƒ½è·å–æ•°æ®ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œ &lt;code&gt;React.Children.map&lt;/code&gt; ä¸ &lt;code&gt;this.props.children.map&lt;/code&gt; å¹¶ä¸ç­‰ä»·ï¼Œåè€…åœ¨åªæœ‰ä¸€ä¸ªå­ç»„ä»¶çš„æ—¶å€™ï¼Œè¿”å›çš„ä¸æ˜¯æ•°ç»„ï¼Œè€Œæ˜¯å”¯ä¸€çš„é‚£ä¸ªç»„ä»¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;reactchildrenmap-çš„å±€é™æ€§&#34;&gt;
  React.Children.map çš„å±€é™æ€§
  &lt;a href=&#34;#reactchildrenmap-%e7%9a%84%e5%b1%80%e9%99%90%e6%80%a7&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢ä»£ç æœ‰ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœå‡ºç°äº†æ›´å¤šå±‚çº§çš„å­ç»„ä»¶ï¼Œé‚£ä¹ˆå‚æ•°ä¼ é€’åªä¼šåˆ°ç¬¬ä¸€å±‚ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switcher&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;props&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt;}&amp;gt;
    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switcher.React&lt;/span&gt;/&amp;gt;
    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
      &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switcher.Vue&lt;/span&gt;/&amp;gt;
    &amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;Switcher&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·å†™ä¼šæç¤ºä¼ é€’äº†é”™è¯¯çš„å‚æ•°ç»™ &lt;code&gt;div&lt;/code&gt;ï¼Œå› ä¸ºæˆ‘ä»¬ &lt;code&gt;React.Children.map&lt;/code&gt; åªèƒ½è·å–åˆ°ç¬¬ä¸€å±‚å­ç»„ä»¶ï¼ˆ&lt;code&gt;[Switcher.React, div]&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;é‚£æ€ä¹ˆåŠï¼Œéš¾é“è¦ç”¨é€’å½’ï¼ŸReact 16.x æä¾›äº†æ–°çš„ &lt;a href=&#34;https://reactjs.org/docs/context.html#when-to-use-context&#34;&gt;Context&lt;/a&gt; å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;Context çš„ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª Contextï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwitcherContext&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;React&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;createContext&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¥ç€æ˜¯ &lt;code&gt;render&lt;/code&gt;ï¼Œæ—¢ç„¶æˆ‘ä»¬ä¸ç¡®å®šä¼šæœ‰å¤šå°‘å±‚çš„å­ç»„ä»¶ï¼Œé‚£ä¹ˆå°±ç›´æ¥å°† &lt;code&gt;this.props.children&lt;/code&gt; åŒ…è£¹åœ¨ &lt;code&gt;Context.Provider&lt;/code&gt; ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;SwitcherContext.Provider&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;props&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt;}&amp;gt;
  {&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;props&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;children&lt;/span&gt;}
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;SwitcherContext.Provider&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åæ”¹å†™æˆ‘ä»¬çš„å­ç»„ä»¶æ•°æ®è·å–æ–¹å¼ï¼Œä¹‹å‰æ˜¯é€šè¿‡ &lt;code&gt;React.cloneElement&lt;/code&gt; æ¥å°†æ•°æ®é€šè¿‡ &lt;code&gt;props&lt;/code&gt; ä¼ é€’åˆ°ç»„ä»¶ä¸­ï¼Œç°åœ¨å¯ä»¥ç›´æ¥ä» &lt;code&gt;Context.Consumer&lt;/code&gt; ä¸­è·å–ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Switcher&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;React&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;() =&amp;gt; (
  &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;SwitcherContext.Consumer&lt;/span&gt;&amp;gt;
    { &lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt; =&amp;gt; (
      &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switch&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;on&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;===&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;React&amp;#39;&lt;/span&gt;}&amp;gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;React&lt;/span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;Switch&lt;/span&gt;&amp;gt;) 
    }
  &amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;SwitcherContext.Consumer&lt;/span&gt;&amp;gt;
)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æ­¤ä¸€æ¥å°±å®Œæˆäº†æˆ‘ä»¬çš„æ”¹é€ ã€‚å¤–éƒ¨ä½¿ç”¨åˆ° &lt;code&gt;Switcher&lt;/code&gt; çš„åœ°æ–¹æ²¡æœ‰ä»»ä½•å˜åŠ¨ï¼Œä¾ç„¶æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switcher&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;props&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selecting&lt;/span&gt;}&amp;gt;
    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switcher.React&lt;/span&gt;/&amp;gt;
    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
      &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Switcher.Vue&lt;/span&gt;/&amp;gt;
    &amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;Switcher&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ç›¸å…³èµ„æ–™&#34;&gt;
  ç›¸å…³èµ„æ–™
  &lt;a href=&#34;#%e7%9b%b8%e5%85%b3%e8%b5%84%e6%96%99&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://frontendmasters.com/courses/advanced-react-patterns/&#34;&gt;Frontend Masters - Advanced React Patterns&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://reactjs.org/docs/context.html#when-to-use-context&#34;&gt;React Context&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

        
        </description>
    </item>
    
    <item>
      <title>ç¿»è¯‘ - å›¾åƒä¼˜åŒ–</title>
      <link>https://joeytat.github.io/posts/optimizing_images/</link>
      <pubDate>Wed, 19 Jun 2019 00:00:00 +0000</pubDate>
      
      <guid>https://joeytat.github.io/posts/optimizing_images/</guid>
      <description>
        
          
          
          
        
        
        &lt;p&gt;ç¿»è¯‘è‡ª &lt;a href=&#34;https://www.swiftjectivec.com/optimizing-images/&#34;&gt;Optimizing Images&lt;/a&gt; by &lt;a href=&#34;https://twitter.com/jordanmorgan10&#34;&gt;Jordan Morgan&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ‰å¥è¯è¯´ï¼šæœ€å¥½çš„ç…§ç›¸æœºå°±æ˜¯åœ¨ä½ èº«è¾¹çš„é‚£å°ã€‚ å¦‚æœè¿™å¥ä¿—è¯­æ˜¯å¯¹çš„ï¼Œé‚£ä¹ˆæ¯«æ— ç–‘é—®åœ°â€” iPhone æ˜¯è¿™ä¸ªæ˜Ÿçƒä¸Šæœ€é‡è¦çš„ç›¸æœºï¼Œ å¹¶ä¸”æˆ‘ä»¬çš„ä¸šç•Œä¹Ÿè¯æ˜äº†è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨åº¦å‡ä¸­? å¦‚æœæ²¡æœ‰åœ¨ä½ çš„ Instagram Story ä¸­ç•™ä¸‹å‡ å¼ ç…§ç‰‡ï¼Œé‚£å°±ä¸ç®—å‘ç”Ÿè¿‡ã€‚&lt;/p&gt;
&lt;p&gt;çˆ†ç‚¸æ–°é—»?  ç«‹åˆ»æ‰“å¼€ Twitter æ¥æŸ¥çœ‹å“ªäº›åª’ä½“åœ¨é€šè¿‡ç…§ç‰‡å®æ—¶æŠ¥é“äº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºå›¾åƒåœ¨å„ä¸ªå¹³å°æ— å¤„ä¸åœ¨çš„å‡ºç°ï¼Œåœ¨ä½æ€§èƒ½ä¸”å†…å­˜ç´§å¼ çš„æƒ…å†µä¸‹å±•ç¤ºå®ƒä»¬ï¼Œä¼šå¾ˆå®¹æ˜“åœ°é€ æˆå¤±æ§ã€‚ å¦‚æœæˆ‘ä»¬çŸ¥é“ UIKit åº•å±‚åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä»¥åŠå¦‚ä½•å¤„ç†å›¾åƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥èŠ‚çœå¤§é‡çš„èµ„æºå¼€é”€ï¼Œå¹¶ä¸”é€ƒè„±æ— æƒ…çš„ç³»ç»Ÿæ¸…é™¤åˆ¶è£ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç†è®ºä¸Šæ¥è¯´&#34;&gt;
  ç†è®ºä¸Šæ¥è¯´
  &lt;a href=&#34;#%e7%90%86%e8%ae%ba%e4%b8%8a%e6%9d%a5%e8%af%b4&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;çªå‡»æµ‹éªŒ - è¿™å¼ æˆ‘å¥³å„¿çš„ 266 KB å­—èŠ‚å¤§å°ï¼ˆå¹¶ä¸”è¿˜è›®æ—¶å°šçš„ï¼‰çš„ç…§ç‰‡ï¼Œåœ¨ä¸€ä¸ª iOS App ä¸­ä¼šå±•ç¤ºéœ€è¦ç”¨åˆ°å¤šå°‘å†…å­˜?&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.swiftjectivec.com/assets/images/baylor.jpg&#34; alt=&#34;Baylor&#34;&gt;&lt;/p&gt;
&lt;p&gt;å‰§é€ä¸€ä¸‹ - ä¸æ˜¯ 266 KBï¼Œä¹Ÿä¸æ˜¯ 2.66 MBï¼Œè€Œæ˜¯å¤§æ¦‚ 14 MBã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆ?&lt;/p&gt;
&lt;p&gt;æœ¬è´¨ä¸Šæ¥è¯´ iOS ç”³è¯·å†…å­˜æ˜¯æ ¹æ®å›¾åƒçš„å°ºå¯¸ - è€Œå›¾åƒçš„æ–‡ä»¶å¤§å°åè€Œå½±å“ä¸å¤§ã€‚ è¿™å¼ å›¾ç‰‡çš„å°ºå¯¸æ˜¯ 1718 x 2048 åƒç´ ã€‚ å‡è®¾æ¯ä¸ªåƒç´ ä¼šå ç”¨ 4 ä¸ªå­—èŠ‚:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1718 * 2048 * 4 / 1024 / 1024 = 13.42 MB  å¤§çº¦&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä½ éœ€è¦å±•ç¤ºä¸€ä¸ªåˆ—è¡¨çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…¶ä¸­æ¯ä¸€è¡Œéƒ½æ˜¾ç¤ºä¸€ä¸ªå¸¸è§çš„åœ†å½¢å¤´åƒåœ¨å·¦ä¾§ã€‚ å¦‚æœä½ è§‰å¾—æ¯ä¸€å¼ å›¾ç‰‡éƒ½é€šè¿‡ ImageOptim æˆ–è€…å…¶ä»–æ–¹å¼å¤„ç†è¿‡å°±æ²¡é—®é¢˜ï¼Œé‚£å°±é”™äº†ã€‚ ä¿å®ˆä¼°è®¡æ¯ä¸€å¼ å¤´åƒæ˜¯ 256 x 256 å¤§å°ï¼Œé‚£ä¾ç„¶ä¼šè€—è´¹å¤§é‡å†…å­˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¸²æŸ“è·¯å¾„&#34;&gt;
  æ¸²æŸ“è·¯å¾„
  &lt;a href=&#34;#%e6%b8%b2%e6%9f%93%e8%b7%af%e5%be%84&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;è¿™å°±æ˜¯è¯´ - æ˜ç™½åº•å±‚æ˜¯æ€ä¹ˆå›äº‹æ˜¯å¾ˆåˆ’ç®—çš„ã€‚ å½“ä½ åŠ è½½ä¸€å¼ å›¾ç‰‡çš„æ—¶å€™ï¼Œä¼šç»ç”±è¿™ä¸‰æ­¥å¤„ç†:&lt;/p&gt;
&lt;p&gt;1ï¼‰ åŠ è½½ - iOS ä¼šè·å–åˆ°å°šæœªè§£å‹çš„å›¾ç‰‡ï¼Œç„¶åå¼€è¾Ÿï¼ˆæˆ‘ä»¬çš„å›¾ç‰‡ä¸¾ä¾‹ï¼‰ 266 kb çš„å†…å­˜ï¼Œç›®å‰ä¸ºæ­¢æ²¡ä»€ä¹ˆå¥½æ‹…å¿ƒçš„ã€‚&lt;/p&gt;
&lt;p&gt;2ï¼‰ è§£ç  - ç°åœ¨ iOS ä¼šå°†å›¾ç‰‡è½¬åŒ–ä¸º GPU å¯ä»¥è¯»å–å¹¶ä¸”å¤„ç†çš„æ•°æ®ã€‚ ç°åœ¨æ˜¯è§£å‹ï¼Œåœ¨è¿™ä¸€æ­¥å°±ä¼šäº§ç”Ÿæˆ‘ä»¬ä¸Šé¢æåˆ°çš„ 14 MB çš„å†…å­˜å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;3ï¼‰ æ¸²æŸ“ - æŒ‰ç…§å­—é¢æ„æ€ç†è§£ï¼Œç°åœ¨å›¾ç‰‡æ•°æ®å‡†å¤‡å¥½äº†ä»¥ä»»ä½•æ–¹å¼è¿›è¡Œæ¸²æŸ“ã€‚ å³ä½¿æ˜¯æ”¾åœ¨ 60 x 60 point çš„ image view ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;è§£ç é˜¶æ®µæ˜¯å¤§å¤´ã€‚ åœ¨è¿™é‡Œ iOS ä¼šåˆ›å»ºä¸€ä¸ªç¼“å†²åŒº - å‡†ç¡®çš„è¯´æ˜¯å›¾ç‰‡ç¼“å†²åŒºã€‚ è¿™é‡Œä¼šå°†å›¾åƒæ”¾åœ¨å†…å­˜ä¸­ã€‚ è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œå…¶å†…å­˜å ç”¨ä¼šå’Œå›¾ç‰‡å°ºå¯¸æŒ‚é’©è€Œä¸æ˜¯å›¾ç‰‡æ–‡ä»¶å¤§å°ã€‚ è¿™å°±æ¸…æ™°åœ°è§£é‡Šäº†ï¼Œå½“å¤„ç†å›¾ç‰‡æ—¶ï¼Œä¸ºä»€ä¹ˆå°ºå¯¸å¯¹äºå†…å­˜æ¶ˆè€—å¦‚æ­¤é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;é’ˆå¯¹ &lt;code&gt;UIImage&lt;/code&gt;ï¼Œ å½“æˆ‘ä»¬æŠŠä»ç½‘ç»œè¯·æ±‚æˆ–è€…å…¶ä»–é€”å¾„è·å–çš„å›¾ç‰‡æ•°æ®ä¼ é€’ç»™å®ƒæ—¶ï¼Œå®ƒä¼šå°†ç¼“å†²åŒºçš„æ•°æ®è§£ç æˆæ•°æ®å£°ç§°çš„æ ¼å¼ï¼ˆæ¯”å¦‚ PNG æˆ–è€… JPEGï¼‰ã€‚ ç„¶è€Œå®ƒå°±ä¼šåœ¨è¿™åœé¡¿äº†ã€‚ ç”±äºæ¸²æŸ“å¹¶éåªæ˜¯ä¸€æ¬¡æ€§æ“ä½œï¼Œ&lt;code&gt;UIImage&lt;/code&gt; ä¼šä¿ç•™è¿™ä¸ªæ•°æ®ç¼“å†²ï¼Œè¿™æ ·å®ƒåªéœ€è¦è§£ç ä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¥æ‰©å±•ä¸€ä¸‹è¿™ä¸ªæ¦‚å¿µ - å¯¹äºä»»ä½• iOS App æ¥è¯´ä¸€ä¸ªå®Œæ•´çš„ç¼“å†²åŒºå°±æ˜¯å…¶å¸§ç¼“å†²åŒºã€‚ è¿™å°±æ˜¯å½“ app å±•ç¤ºåœ¨å±å¹•ä¸Šæ—¶ï¼Œè´Ÿè´£æŒæœ‰è¾“å‡ºæ¸²æŸ“å†…å®¹çš„ä¸œè¥¿ã€‚ ä»»ä½• iOS è®¾å¤‡ä¸Šçš„æ˜¾ç¤ºç¡¬ä»¶ï¼Œéƒ½ä¼šä½¿ç”¨å…¶ä¸­çš„åƒç´ ä¿¡æ¯æ¥ç‚¹äº®å¯¹åº”çš„ç‰©ç†å±å¹•åƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤„æ—¶é—´å¾ˆé‡è¦ã€‚ ä¸ºäº†è¾¾åˆ°æ¯ç§’ 60 å¸§å¦‚é»„æ²¹èˆ¬é¡ºæ»‘çš„æ»šåŠ¨æ•ˆæœï¼Œåœ¨ app çš„ window åŠå…¶ subviews æ”¹å˜çš„æ—¶å€™ï¼ˆæ¯”å¦‚åˆ†é…äº†ä¸€ä¸ª image ç»™ image viewï¼‰ï¼Œå¸§ç¼“å†²åŒºéœ€è¦ UIKit æ¥æ¸²æŸ“ã€‚ å¦‚æœæ¸²æŸ“æ…¢äº†ï¼Œå°±ä¼šæ‰å¸§ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è§‰å¾—åªæœ‰ 1/60 ç§’å¤„ç†æ—¶é—´å¤ªçŸ­äº†? å…·å¤‡ Pro Motion çš„è®¾å¤‡åªä¼šç»™ 1/120 ç§’çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å¤§å°çœŸçš„å¾ˆé‡è¦&#34;&gt;
  å¤§å°çœŸçš„å¾ˆé‡è¦
  &lt;a href=&#34;#%e5%a4%a7%e5%b0%8f%e7%9c%9f%e7%9a%84%e5%be%88%e9%87%8d%e8%a6%81&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å…¶å®å¯ä»¥å¾ˆè½»æ¾åœ°è§‚å¯Ÿåˆ°è¿™æ­¥å¤„ç†ä»¥åŠå†…å­˜æ—¶å¦‚ä½•è¢«æ¶ˆè€—æ‰çš„ã€‚ æˆ‘åˆ›å»ºäº†ä¸€ä¸ªå®éªŒ appï¼Œç”¨ image view æ¥å±•ç¤ºäº†æˆ‘å¥³å„¿çš„ç…§ç‰‡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; filePath = Bundle.main.path(forResource:&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;baylor&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;ofType: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jpg&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; url = NSURL(fileURLWithPath: filePath)
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; fileImage = UIImage(contentsOfFile: filePath)

&lt;span style=&#34;color:#75715e&#34;&gt;// Image view&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; imageView = UIImageView(image: fileImage)
imageView.translatesAutoresizingMaskIntoConstraints = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
imageView.contentMode = .scaleAspectFit
imageView.widthAnchor.constraint(equalToConstant: &lt;span style=&#34;color:#ae81ff&#34;&gt;300&lt;/span&gt;).isActive = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
imageView.heightAnchor.constraint(equalToConstant: &lt;span style=&#34;color:#ae81ff&#34;&gt;400&lt;/span&gt;).isActive = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;

view.addSubview(imageView)
imageView.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
imageView.centerYAnchor.constraint(equalTo: view.centerYAnchor).isActive = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬åªæ˜¯ä¸ºäº†æ¼”ç¤ºåœºæ™¯ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¯·è°¨æ…ä½¿ç”¨å¼ºåˆ¶è§£åŒ…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸Šé¢çš„ä»£ç è¿è¡Œèµ·æ¥æ—¶è¿™æ ·:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.swiftjectivec.com/assets/images/baylorPhone.jpg&#34; alt=&#34;Baylor&#34;&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå°å¾—å¤šçš„ Image View æ¥å±•ç¤ºå›¾ç‰‡ï¼Œä½†é€šè¿‡ LLDB æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°å›¾ç‰‡å®é™…çš„å°ºå¯¸ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&amp;lt;UIImage: &lt;span style=&#34;color:#ae81ff&#34;&gt;0x600003d41a40&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;1718&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2048&lt;/span&gt;}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è®°ä½ï¼Œè¿™æ˜¯ç‚¹è¡¨ç¤ºã€‚ æ‰€ä»¥å¦‚æœæˆ‘ä½¿ç”¨çš„æ˜¯ 3x æˆ–è€… 2x è®¾å¤‡ï¼Œè¿™ä¸ªæ•°å­—éœ€è¦æ›´å¤§ä¸€äº›ã€‚  æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ vmmap æ¥ç¡®å®šè¿™å¼ å›¾ç‰‡æ˜¯å¦çœŸçš„å ç”¨äº† 14 MBã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vmmap --summary baylor.memgraph
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ‰å‡ ä¸ªä¸œè¥¿å¼•èµ·äº†æ³¨æ„ï¼ˆä¸ºäº†ç®€æ´åªæˆªå‡ºäº†éƒ¨åˆ†è¾“å‡ºï¼‰:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Physical footprint:         69.5M
Physical footprint (peak):  69.7M
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¥è¿‘ 70 MB ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒæ¥ç¡®å®šæˆ‘ä»¬çš„é‡æ„æ˜¯å¦æœ‰æ•ˆã€‚ å¦‚æœæˆ‘ä»¬é€šè¿‡ grep å‘½ä»¤æ¥ç­›é€‰ Image IOï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿçœ‹åˆ°å›¾ç‰‡çš„å¼€é”€ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vmmap --summary baylor.memgraph | grep &amp;quot;Image IO&amp;quot;

Image IO  13.4M   13.4M   13.4M    0K  0K  0K   0K  2 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å•Šå“ˆ - è¿™é‡Œå°±æœ‰æ¥è¿‘ 14 MB çš„è„å†…å­˜ã€‚ å¦‚åŒæˆ‘ä»¬åœ¨é¤å·¾çº¸èƒŒé¢å†™ä¸‹çš„å…¬å¼è®¡ç®—çš„é‚£æ ·ã€‚ èƒŒæ™¯è¡¥å……ä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªç»ˆç«¯çš„å±å¹•æˆªå›¾ï¼Œæ¸…æ¥šåœ°æ˜¾ç¤ºäº†æ¯ä¸€åˆ—çš„å«ä¹‰ã€‚ ï¼ˆç”±äºä»–ä»¬è¢« grep å‘½ä»¤ç»™çœç•¥æ‰äº†ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.swiftjectivec.com/assets/images/vmmap.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å¾ˆæ˜ç¡®äº†ï¼Œæ­¤åˆ»æˆ‘ä»¬åœ¨ 300 x 400 çš„ image view ä¸­ä¹Ÿä¾ç„¶ä»˜å‡ºäº†å›¾åƒçš„å®Œæ•´å¼€é”€ã€‚ å›¾åƒçš„å¤§å°æ˜¯å¾ˆå…³é”®ï¼Œä½†è¿™å¹¶ä¸æ˜¯å”¯ä¸€é‡è¦çš„ç‚¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è‰²åŸŸ&#34;&gt;
  è‰²åŸŸ
  &lt;a href=&#34;#%e8%89%b2%e5%9f%9f&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ä½ æ‰€è¯·æ±‚çš„å†…å­˜æ¶ˆè€—æœ‰ä¸€éƒ¨åˆ†æºäºå¦ä¸€ä¸ªé‡è¦å› ç´  - è‰²åŸŸã€‚ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬åšäº†ä¸€ä¸ªå‡è®¾ï¼Œè€Œè¿™ä¸ªå‡è®¾å¹¶ä¸é€‚ç”¨äºå¤§å¤šæ•° iPhone - ä¹Ÿå°±æ˜¯å›¾åƒé‡‡ç”¨çš„æ˜¯ sRGB æ ¼å¼ã€‚ æ¯ä¸ªåƒç´  4 ä¸ªå­—èŠ‚å¯¹åº”çš„æ˜¯çº¢ï¼Œè“ï¼Œç»¿ä»¥åŠé€æ˜ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ”¯æŒå¹¿è‰²åŸŸæ ¼å¼çš„è®¾å¤‡ï¼ˆiPhone 8+ æˆ– iPhone Xï¼‰è¿›è¡Œæ‹æ‘„ï¼Œé‚£å°±å¯ä»¥è‚¯å®šæ•°å­—ä¼šåŠ å€äº†ã€‚ å½“ç„¶äº†ï¼Œåè¿‡æ¥ä¹Ÿä¸€æ ·ï¼ŒMetal æ”¯æŒä½¿ç”¨ Alpha 8 æ ¼å¼ï¼Œå°±åƒå…¶åå­—æè¿°çš„é‚£æ ·åªæœ‰å•ä¸€é€šé“ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰éå¸¸å¤šéœ€è¦è€ƒè™‘çš„ä¸œè¥¿ã€‚ è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½ åº”è¯¥ä½¿ç”¨ &lt;a href=&#34;https://swiftjectivec.com/UIGraphicsImageRenderer&#34;&gt;UIGraphicsImageRenderer&lt;/a&gt; è€Œä¸æ˜¯ &lt;code&gt;UIGraphicsBeginImageContextWithOptions&lt;/code&gt;ã€‚ åè€…ä¼š&lt;strong&gt;ä¸€ç›´&lt;/strong&gt;ä½¿ç”¨ sRGBï¼Œè¿™ä¹Ÿæ„å‘³ç€ä½ ä¼šä¸¢å¤±å¹¿è‰²åŸŸæ ¼å¼ï¼Œå¦‚æœä½  &lt;a href=&#34;https://instagram-engineering.com/bringing-wide-color-to-instagram-5a5481802d7d&#34;&gt;æƒ³è¦çš„è¯&lt;/a&gt;ï¼Œæˆ–æ˜¯é”™å¤±èŠ‚çœå¼€é”€çš„æœºä¼šã€‚  åœ¨ iOS 12 ä¹‹åï¼Œ&lt;code&gt;UIGraphicsImageRenderer&lt;/code&gt; ä¼šè‡ªåŠ¨å¸®ä½ é€‰æ‹©æ­£ç¡®çš„æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;æœ€ååˆ«å¿˜è®°äº†ï¼Œå¾ˆå¤šå›¾ç‰‡å¹¶ä¸æ˜¯æ‹æ‘„å‡ºæ¥çš„ï¼Œè€Œæ˜¯é€šè¿‡ç»˜å›¾ç»˜åˆ¶çš„ã€‚ è¿™é‡Œå¹¶ä¸æ˜¯åˆ»æ„é‡å¤æˆ‘å†™è¿‡çš„ä¸œè¥¿ï¼Œåªæ˜¯æ€•ä½ ä¹‹å‰é”™è¿‡äº†:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; circleSize = CGSize(width: &lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;height: &lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;)

UIGraphicsBeginImageContextWithOptions(circleSize&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;// Draw a circle&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; ctx = UIGraphicsGetCurrentContext()&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;
UIColor.red.setFill()
ctx.setFillColor(UIColor.red.cgColor)
ctx.addEllipse(&lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;: CGRect(x: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;y: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;width: circleSize.width&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;height: circleSize.height))
ctx.drawPath(using: .fill)

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; circleImage = UIGraphicsGetImageFromCurrentImageContext()
UIGraphicsEndImageContext()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªåœ†å½¢å›¾ç‰‡ä½¿ç”¨çš„æ˜¯æ¯ä¸ªåƒç´  4 å­—èŠ‚æ ¼å¼ã€‚ å¦‚æœä½ ä½¿ç”¨ &lt;code&gt;UIGraphicsImageRenderer&lt;/code&gt; é‚£ä¹ˆæ¸²æŸ“å™¨ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ ¼å¼ï¼Œä¸ºæ¯ä¸ªåƒç´ èŠ‚çœ 75% çš„å†…å­˜æ¶ˆè€—ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; circleSize = CGSize(width: &lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;height: &lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; renderer = UIGraphicsImageRenderer(bounds: CGRect(x: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;y: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;width: circleSize.width&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;height: circleSize.height))

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; circleImage = renderer.image{ ctx &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
    UIColor.red.setFill()
    ctx.cgContext.setFillColor(UIColor.red.cgColor)
    ctx.cgContext.addEllipse(&lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;: CGRect(x: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;y: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;width: circleSize.width&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;height: circleSize.height))
    ctx.cgContext.drawPath(using: .fill)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç¼©å°åˆ†è¾¨ç‡-vs-ç¼©å°é‡‡æ ·&#34;&gt;
  ç¼©å°åˆ†è¾¨ç‡ vs ç¼©å°é‡‡æ ·
  &lt;a href=&#34;#%e7%bc%a9%e5%b0%8f%e5%88%86%e8%be%a8%e7%8e%87-vs-%e7%bc%a9%e5%b0%8f%e9%87%87%e6%a0%b7&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬è·³è¿‡ç®€å•ç»˜å›¾çš„åœºæ™¯ - è¿˜æœ‰éå¸¸å¤šä¸å›¾åƒç›¸å…³çš„å†…å­˜é—®é¢˜ï¼Œæºè‡ªçœŸå®çš„æ‘„å½±å›¾ç‰‡ã€‚ æ¯”å¦‚äººåƒï¼Œé£æ™¯ç…§ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºä¸€äº›å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œä»–ä»¬æœ‰ç†ç”±ï¼ˆé€»è¾‘ä¸Šä¹Ÿè¯´å¾—è¿‡å»ï¼‰ç›¸ä¿¡ï¼Œé€šè¿‡ &lt;code&gt;UIImage&lt;/code&gt; ç®€å•åœ°ç¼©å°å›¾åƒå°ºå¯¸å°±è¶³å¤Ÿäº†ã€‚ ä½†ç”±äºä¸Šé¢æåŠçš„åŸå› ï¼Œè¿™é€šå¸¸æ¥è¯´ä¸å¤Ÿï¼Œè€Œä¸”æ® Apple å‘˜å·¥ Kyle Howarth æè¿°è¿™ä¹Ÿæ²¡æœ‰é‚£ä¹ˆé«˜æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æˆ‘ä»¬ä¹‹å‰è®¨è®ºæ¸²æŸ“è·¯å¾„æ—¶æåˆ°çš„ï¼Œ&lt;code&gt;UIImage&lt;/code&gt; ä¼šäº§ç”Ÿå†…å­˜é—®é¢˜çš„ä¸»è¦åŸå› æ˜¯å®ƒä¼šå°†åŸå§‹å›¾åƒåŠ è½½åˆ°å†…å­˜ä¸­è¿›è¡Œè§£å‹ã€‚ ç†æƒ³çŠ¶æ€ä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥å‡å°‘å›¾åƒç¼“å­˜åŒºçš„å¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥åªä»¥è°ƒæ•´å›¾åƒæ–‡ä»¶çš„å¤§å°ä¸ºä»£ä»·ï¼Œæ¥å½±å“å›¾åƒå†…å­˜å¤§å°ã€‚ é€šå¸¸äººä»¬ä¼šå‡è®¾è¿™å°±æ˜¯ç³»ç»Ÿå¦‚ä½•å®ç°çš„ï¼Œä½†å…¶å®ä¸æ˜¯ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬ç”¨ç‚¹åº•å±‚ API æ¥ç¼©å°é‡‡æ ·è¯•è¯•:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; imageSource = CGImageSourceCreateWithURL(url&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; options: [NSString:Any] = [kCGImageSourceThumbnailMaxPixelSize:&lt;span style=&#34;color:#ae81ff&#34;&gt;400&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;
                               kCGImageSourceCreateThumbnailFromImageAlways:&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;]

&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; scaledImage = CGImageSourceCreateThumbnailAtIndex(imageSource&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;options &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; CFDictionary) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; imageView = UIImageView(image: UIImage(cgImage: scaledImage))
    
    imageView.translatesAutoresizingMaskIntoConstraints = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
    imageView.contentMode = .scaleAspectFit
    imageView.widthAnchor.constraint(equalToConstant: &lt;span style=&#34;color:#ae81ff&#34;&gt;300&lt;/span&gt;).isActive = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
    imageView.heightAnchor.constraint(equalToConstant: &lt;span style=&#34;color:#ae81ff&#34;&gt;400&lt;/span&gt;).isActive = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
    
    view.addSubview(imageView)
    imageView.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
    imageView.centerYAnchor.constraint(equalTo: view.centerYAnchor).isActive = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†æ¬¡è¿è¡Œï¼Œæˆ‘ä»¬å¾—åˆ°çš„æ˜¾ç¤ºæ•ˆæœå’Œä¹‹å‰ä¸€æ ·ã€‚ ä½†åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº† &lt;code&gt;CGImageSourceCreateThumbnailAtIndex()&lt;/code&gt; è€Œä¸æ˜¯ç›´æ¥å°†åŸå§‹å›¾åƒæ”¾åœ¨ image view  ä¸­ã€‚ çœŸç›¸å¤§ç™½çš„æ—¶åˆ»åˆ°äº†ï¼Œè®©æˆ‘ä»¬é€šè¿‡ &lt;code&gt;vmmap&lt;/code&gt; æ¥çœ‹çœ‹æˆ‘ä»¬çš„ä¼˜åŒ–æ˜¯å¦å¥æ•ˆï¼ˆå†ä¸€æ¬¡ï¼Œä¸ºäº†ç®€æ´åªæˆªå–äº†éƒ¨åˆ†ï¼‰:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vmmap -summary baylorOptimized.memgraph

Physical footprint:         56.3M
Physical footprint (peak):  56.7M
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;èŠ‚çœçš„å¼€é”€éƒ½ç»Ÿè®¡åœ¨äº†ä¸€èµ·ã€‚ å¦‚æœæˆ‘ä»¬å°†ä¹‹å‰çš„ 69.5M å’Œç°åœ¨çš„ 56.3M è¿›è¡Œå¯¹æ¯”ï¼Œæˆ‘ä»¬èŠ‚çº¦äº† 13.2Mã€‚ è¿™æ˜¯ä¸ªå¾ˆå¤§çš„èŠ‚çœï¼Œå‡ ä¹æ˜¯æ•´ä¸ªå›¾ç‰‡çš„å¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;å†è¿›ä¸€æ­¥ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€è¦é€šè¿‡å„ç§é€‰é¡¹æ¥æ‰“ç£¨ã€‚ åœ¨ WWDC 2018 Session 219 &amp;ldquo;Images and Graphics Best Practices&amp;rdquo; ä¸­ï¼ŒApple å·¥ç¨‹å¸ˆ Kyle Sluder é€šè¿‡ä½¿ç”¨ &lt;code&gt;kCGImageSourceShouldCacheImmediately&lt;/code&gt; æ ‡è®°æ¥å±•ç¤ºäº†ä¸€ä¸ªå¾ˆæœ‰è¶£çš„æŠ€å·§æ§åˆ¶è§£ç :&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;downsampleImage&lt;/span&gt;(at URL:NSURL&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;maxSize:Float) -&amp;gt; UIImage
{
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; sourceOptions = [kCGImageSourceShouldCache:&lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; CFDictionary
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; source = CGImageSourceCreateWithURL(URL &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; CFURL&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;sourceOptions)&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; downsampleOptions = [kCGImageSourceCreateThumbnailFromImageAlways:&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;
                             kCGImageSourceThumbnailMaxPixelSize:maxSize
                             kCGImageSourceShouldCacheImmediately:&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;
                             kCGImageSourceCreateThumbnailWithTransform:&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;
                             ] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; CFDictionary
    
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; downsampledImage = CGImageSourceCreateThumbnailAtIndex(source,  &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, downsampleOptions)&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;
    
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; UIImage(cgImage: downsampledImage)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Core Graphics å¹¶ä¸ä¼šå‚ä¸è§£ç å›¾ç‰‡ï¼Œç›´åˆ°ä½ æ˜ç¡®éœ€è¦ä½¿ç”¨ç¼©ç•¥å›¾çš„æ—¶å€™ã€‚ å¹¶ä¸”éœ€è¦æ³¨æ„ä¼ å…¥ &lt;code&gt;kCGImageSourceCreateThumbnailMaxPixelSize&lt;/code&gt;ï¼Œå°±åƒæˆ‘ä»¬åšçš„ä¸Šé¢ä¸¤ä¸ªä¾‹å­é‚£æ ·ã€‚ å¦‚æœä½ ä¸ä¼ ï¼Œé‚£ä¹ˆä½ ä¼šå¾—åˆ°ä¸€ä¸ªå’ŒåŸå§‹å›¾åƒä¸€æ ·å¤§å°çš„ç¼©ç•¥å›¾ã€‚ æ®æ–‡æ¡£æè¿°:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œâ€¦å¦‚æœæ²¡æœ‰æŒ‡å®šæœ€å¤§åƒç´ å¤§å°ï¼Œé‚£ä¹ˆç¼©ç•¥å›¾å°±ä¼šæ˜¯å®Œæ•´çš„å›¾ç‰‡å¤§å°ï¼Œè¿™å¯èƒ½ä¸æ˜¯ä½ æƒ³è¦çš„ã€‚â€
â€œâ€¦if a maximum pixel size isnâ€™t specified,  then the thumbnail will be the size of the full image, which probably isnâ€™t what you want.â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é‚£ä¹ˆè¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆ?  ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨ç¼©ç•¥å›¾ä¸Šä½¿ç”¨äº†ç¼©å°éƒ¨åˆ†å›¾ç‰‡çš„ç­‰å¼ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå°å¾—å¤šçš„è§£ç å›¾åƒç¼“å†²åŒºã€‚ å›å¿†ä¸€ä¸‹ä¹‹å‰æåˆ°çš„æ¸²æŸ“è·¯å¾„ï¼Œç¬¬ä¸€æ­¥ï¼ˆåŠ è½½ï¼‰ç°åœ¨æˆ‘ä»¬æ²¡æœ‰åˆ›å»ºä¸€ä¸ªåŸå§‹å›¾åƒå¤§å°çš„ç¼“å†²åŒºï¼Œè€Œæ˜¯ä¸€ä¸ª image view æ˜¾ç¤ºå¤§å°çš„ç¼“å†²åŒºã€‚&lt;/p&gt;
&lt;p&gt;æƒ³è¦ä¸€ä¸ªè¿™ç¯‡æ–‡ç« çš„å¤ªé•¿ä¸è¯»ç‰ˆæœ¬? æ‰¾æœºä¼šé™ä½å›¾åƒé‡‡æ ·ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ &lt;code&gt;UIImage&lt;/code&gt; ç¼©å°å›¾ç‰‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é™„åŠ éƒ¨åˆ†&#34;&gt;
  é™„åŠ éƒ¨åˆ†
  &lt;a href=&#34;#%e9%99%84%e5%8a%a0%e9%83%a8%e5%88%86&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æˆ‘ä¸ªäººåœ¨ Tandem ä¸­é…åˆç€ &lt;a href=&#34;https://developer.apple.com/documentation/uikit/uitableviewdatasourceprefetching?language=swift&#34;&gt;prefetch API&lt;/a&gt; ï¼ˆiOS 11ï¼‰ ä½¿ç”¨äº†è¿™ç§æŠ€æœ¯ã€‚ ä½†è¦è®°ä½å³ä½¿æˆ‘ä»¬åœ¨çœŸæ­£ä½¿ç”¨ table view æˆ–è€… collection view ä¹‹å‰è¿™æ ·åšï¼Œæˆ‘ä»¬åœ¨è§£ç å›¾ç‰‡çš„æ—¶å€™ï¼Œå†…éƒ¨ä¾ç„¶ä¼šå¸¦æ¥çš„ä¸€ä¸ª CPU ä½¿ç”¨é‡çš„é«˜å³°ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡ iOS åœ¨é¢å¯¹æŒç»­æ€§èƒ½æ¶ˆè€—æ—¶æœ‰å¾ˆé«˜æ•ˆçš„å¤„ç†æ–¹æ¡ˆï¼Œä½†åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå¯èƒ½æ˜¯æ—¶ä¸æ—¶æ‰ä¼šäº§ç”Ÿè¿™æ ·çš„é«˜å³°ã€‚ æ‰€ä»¥åœ¨å¤„ç†è¿™ç§é—®é¢˜çš„æ—¶å€™ï¼Œæœ€å¥½æŠŠå¸Œæœ›å¯„äºˆä½ è‡ªå·±åˆ›å»ºçš„é˜Ÿåˆ—ã€‚ å¦ä¸€ä¸ªä¼˜åŠ¿æ˜¯ï¼Œè¿™æ ·è¿˜èƒ½å°†è§£ç ç§»åŠ¨åˆ°åå°å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;å¿«é®ä½çœ¼ç›ï¼Œæˆ‘ä¸šä½™é¡¹ç›®ä¸­çš„ Objective-C ä»£ç è¦å‡ºæ¥äº†:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//  ç”¨ä½ è‡ªå·±çš„é˜Ÿåˆ—è€Œä¸æ˜¯ global é˜Ÿåˆ—å¯ä»¥é¿å…æ½œåœ¨çš„çº¿ç¨‹çˆ†ç‚¸
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
- (&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)&lt;span style=&#34;color:#a6e22e&#34;&gt;tableView:&lt;/span&gt;(UITableView &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)tableView &lt;span style=&#34;color:#a6e22e&#34;&gt;prefetchRowsAtIndexPaths:&lt;/span&gt;(NSArray&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;NSIndexPath &lt;span style=&#34;color:#f92672&#34;&gt;*&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)indexPaths
{
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (self.downsampledImage &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; nil &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; 
        self.listItem.mediaAssetData &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; nil) &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;;
    
    NSIndexPath &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;mediaIndexPath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [NSIndexPath indexPathForRow:&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
                                                     inSection:SECTION_MEDIA];
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ([indexPaths containsObject:mediaIndexPath])
    {
        CGFloat scale &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tableView.traitCollection.displayScale;
        CGFloat maxPixelSize &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (tableView.width &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; SSSpacingJumboMargin) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; scale;
        
        dispatch_async(self.downsampleQueue&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;^&lt;/span&gt;{
            &lt;span style=&#34;color:#75715e&#34;&gt;// ç¼©å‡é‡‡æ ·
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;            self.downsampledImage &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [UIImage downsampledImageFromData:self.listItem.mediaAssetData
                               scale:scale
                        maxPixelSize:maxPixelSize];
            
            dispatch_async(dispatch_get_main_queue()&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;^&lt;/span&gt; {
                self.listItem.downsampledMediaImage &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; self.downsampledImage;
            });
        });
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„åœ¨ä½ æœ‰å¤§é‡çš„åŸå§‹å›¾åƒï¼ˆraw imageï¼‰èµ„æºæ—¶ä½¿ç”¨èµ„æºç®¡ç†ï¼ˆasset catalogsï¼‰ã€‚
å› ä¸ºå®ƒä¼šå¸®ä½ ç®¡ç†ç¼“å­˜å¤§å°ï¼ˆè¿˜æœ‰å…¶ä»–å¾ˆå¤šçš„ä¼˜åŠ¿ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æƒ³è¦äº†è§£æ›´å¤šå…³äºå›¾åƒå’Œå†…å­˜ç®¡ç†çš„ä¿¡æ¯ï¼Œå¯ä»¥å…³æ³¨è¿™äº›ä¿¡æ¯é‡å·¨å¤§çš„ WWDC 18 session:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2018/416/?time=1074&#34;&gt;iOS Memory Deep Dive&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2018/219/&#34;&gt;Images and Graphics Best Practices&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€»ç»“ä¸€ä¸‹&#34;&gt;
  æ€»ç»“ä¸€ä¸‹
  &lt;a href=&#34;#%e6%80%bb%e7%bb%93%e4%b8%80%e4%b8%8b&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ä½ æ— æ³•å¯Ÿè§‰ä½ ä¸çŸ¥é“çš„ä¸œè¥¿ã€‚ å°±ç¼–ç¨‹æ¥è¯´ï¼Œä½ åŸºæœ¬ä¸Šç›¸å½“äºæŠ¥åå‚åŠ äº†ä¸€ä¸ªéœ€è¦æŒç»­è·‘æ¯å°æ—¶ 10ï¼Œ000 ç±³ä»¥è·Ÿä¸Šåˆ›æ–°å’Œå˜é©çš„èŒä¸šç”Ÿæ¶¯ã€‚  è¿™æ„å‘³ç€&amp;hellip;æœ‰å¤§é‡çš„ APIï¼Œæ¡†æ¶ï¼Œè®¾è®¡æ¨¡å¼æˆ–è€…ä¼˜åŒ–æ–¹æ¡ˆä½ å¹¶ä¸çŸ¥æ™“ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å›¾åƒé¢†åŸŸå°¤å…¶æ˜¯è¿™æ ·ã€‚ å¤§å¤šæ•°æ—¶é—´ï¼Œä½ å¯èƒ½åªæ˜¯åˆå§‹åŒ–äº†ä¸€ä¸ª &lt;code&gt;UIImageView&lt;/code&gt; ç„¶åæ”¾è¿›äº†ä¸€äº›å¥½çœ‹çš„åƒç´ ï¼Œå°±è¿‡äº†ã€‚ æˆ‘çŸ¥é“å•¦ï¼Œæ‘©å°”å®šç†ä»€ä¹ˆçš„ã€‚ ç°åœ¨è¿™äº›ç”µè¯è¿è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œè€Œä¸”æœ‰æ•° G çš„å†…å­˜ï¼Œå¹¶ä¸”æˆ‘ä»¬æŠŠäººç±»è¿é€åˆ°äº†æœˆçƒä¸Šï¼Œéƒ½åªç”¨äº†ä¸€å°ä¸åˆ° 100K å†…å­˜çš„ç”µè„‘ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å’Œé­”é¬¼å…±èˆä¸ä¼šé•¿ä¹…ï¼Œä»–å¿…ç„¶éœ€è¦æ»‹å…»ä»–çš„è§’ã€‚ åˆ«è®©ç³»ç»Ÿæ€æ‰ä½ çš„åº”ç”¨ï¼Œåªæ˜¯å› ä¸ºä½ ç”¨äº† 1G å†…å­˜æ¥å±•ç¤ºä¸€å¼ è‡ªæ‹ç…§ã€‚ ä½†æ„¿è¿™äº›çŸ¥è¯†å’ŒæŠ€å·§å¯ä»¥å°†ä½ æ‹¯æ•‘äºå´©æºƒæ—¥å¿—ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹æ¬¡è§ âœŒï¸ã€‚&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>Platforms State of the Union(WWDC 2019)</title>
      <link>https://joeytat.github.io/posts/wwdc2019_platforms_state_of_the_union/</link>
      <pubDate>Wed, 05 Jun 2019 00:00:00 +0000</pubDate>
      
      <guid>https://joeytat.github.io/posts/wwdc2019_platforms_state_of_the_union/</guid>
      <description>
        
          
          
          
        
        
        &lt;h2 id=&#34;swiftui&#34;&gt;
  SwiftUI
  &lt;a href=&#34;#swiftui&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;åœ¨ View å±‚çº§æä¾›äº†å››ç§ç‰¹æ€§:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Declarative
é€šè¿‡å£°æ˜å¼çš„è¯­å¥æ¥æè¿° UI å¸ƒå±€, æ ·å¼, åŠ¨ç”»ç­‰.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Automatic
å¯äº¤äº’å½¢åŠ¨ç”», åŠ¨æ€å­—å·, å¤œé—´æ¨¡å¼éƒ½å¯ä»¥é€šè¿‡é…ç½®æ¥è½»æ¾å®ç°.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Compositional
ç»„åˆæ€§. å„ç§æ§ä»¶éƒ½èƒ½æå…¶æ–¹ä¾¿åœ°ç»„åˆåœ¨ä¸€èµ·, è¿œæ¯” &lt;code&gt;UIStackView&lt;/code&gt; æ–¹ä¾¿.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;VStack(alignment: .leading) {
    Text(item.title)
    Text(item.subtitle)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Consistent
è‡ªå¸¦ Reactive ç‰¹æ€§.  å°† Model å¯¹è±¡ç»§æ‰¿è‡ª &lt;code&gt;BindableObject&lt;/code&gt;, å¹¶ä¸”å£°æ˜å±æ€§ä¸º &lt;code&gt;@State&lt;/code&gt; å³å¯è·å¾—å½“å±æ€§æ”¹å˜æ—¶, UI æ§ä»¶è‡ªåŠ¨æ›´æ–°çš„æ•ˆæœ.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;çœŸçš„å¦‚æœå¦‚æ­¤ç¾å¥½, è¶…çº§åƒæ€§èƒ½çš„ xib å’Œ storyboard æ˜¯ä¸æ˜¯å¯ä»¥é€€å‡ºèˆå°äº†.&lt;/p&gt;
&lt;h2 id=&#34;xcode-11&#34;&gt;
  Xcode 11
  &lt;a href=&#34;#xcode-11&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Live Development
ç›´æ¥åœ¨ Xcode Preview ä¸­æ‹–åŠ¨æ§ä»¶å³å¯ç”Ÿæˆå¯¹åº”çš„ SwiftUI ä»£ç . å¯¹åº”çš„ä¿®æ”¹ SwiftUI ä»£ç ä¹Ÿèƒ½å®æ—¶åœ¨ Preview ä¸­å“åº”.&lt;/p&gt;
&lt;p&gt;Preview è¿˜èƒ½é€šè¿‡æä¾›ä¸€ä¸ª &lt;code&gt;PreviewProvider&lt;/code&gt; æ¥ä¸ºå…¶æä¾›æ•°æ®å¡«å……å±•ç¤º, æ ·å¼æ›´æ”¹ç”šè‡³å¾ªç¯è¯­å¥æ¥ç”Ÿæˆå¤šä¸ª Preview åŒæ—¶æŸ¥çœ‹æ§ä»¶åœ¨å¤œé—´æ¨¡å¼å’Œç™½æ—¥æ¨¡å¼ä¸‹ä¸åŒçš„æ•ˆæœ.&lt;/p&gt;
&lt;p&gt;Preview éƒ¨ç½²åœ¨è®¾å¤‡ä¸Šä¹Ÿèƒ½çƒ­åŠ è½½.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Package Management
Swift ç»ˆäºæœ‰è‡ªå·±çš„ Package manage äº†. å¹¶ä¸”å’Œ Xcode è¿›è¡Œäº†æ·±åº¦æ•´åˆ.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Minimap
ä»£ç åœ¨å³ä¾§ä¼šå‘ˆç°ç±»ä¼¼ ctrl+6 çš„ç¼©ç•¥å›¾.
å¦‚æœä»£ç ä¸­å†™äº† &lt;code&gt;// MARK: -&lt;/code&gt; &lt;code&gt;// TODO: -&lt;/code&gt; ç­‰æ ‡è®°, ä¼šæ›´æ¸…æ™°åœ°æ˜¾ç¤ºå‡ºæ¥. æŒ‰ä½ cmd ä¼šæ˜¾ç¤ºæ‰€æœ‰çš„æ ‡è®°.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç‰ˆæœ¬ç®¡ç†
å¯ä»¥ç›´æ¥åœ¨ä¿®æ”¹ä»£ç çš„ä½ç½®æŸ¥çœ‹åˆ°åŸæ¥çš„ç‰ˆæœ¬.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Test Plan
åŒæ—¶æµ‹è¯•å„ç§å¹³å°å„ç§è®¾å¤‡.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è·¨å¹³å°æ–¹æ¡ˆ&#34;&gt;
  è·¨å¹³å°æ–¹æ¡ˆ
  &lt;a href=&#34;#%e8%b7%a8%e5%b9%b3%e5%8f%b0%e6%96%b9%e6%a1%88&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;SwiftUI æ”¯æŒè·¨å¹³å°,  åŒæ—¶æ”¯æŒ iOS, macOS, iPadOS. é‚£å¦‚ä½•åœ¨ iOS App çš„åŸºç¡€ä¸Šåˆ›å»ºä¸€ä¸ª macOS App å‘¢? åªéœ€è¦ä¸‰ä¸ªæ­¥éª¤:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‹¾é€‰ä¸Š deployment ä¸­çš„ âœ… mac&lt;/li&gt;
&lt;li&gt;åŒæ—¶å‹¾é€‰ä¸Š âœ… iPad, ä¸€ä¸ªå¥½çš„ iPad app, å°±æ˜¯ä¸€ä¸ªå¥½çš„ macOS app&lt;/li&gt;
&lt;li&gt;é’ˆå¯¹ macOS çš„èœå•, å¿«æ·é”®ç­‰å…·æœ‰å¹³å°ç‰¹æ®Šæ€§è´¨çš„æ“ä½œè¿›è¡Œä¸€äº›å•ç‹¬é€‚é….&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿˜å¯¹ catalina çš„ä¸€äº›ç³»ç»Ÿä¿®æ”¹è¿›è¡Œäº†ä»‹ç», æ¯”å¦‚å„ç§èµ„æºæƒé™çš„æ”¶ç´§, å¹¶ä¸”æ–‡ä»¶èµ„æºæƒé™åˆ†æˆäº†ä¸¤éƒ¨åˆ†, ç³»ç»Ÿæ–‡ä»¶å¯¹äºä¸‰æ–¹ app å˜æˆäº†åªè¯».&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åé¢éƒ½æ˜¯å„å¹³å°ç³»ç»Ÿæˆ–æ–°åŠŸèƒ½çš„ä»‹ç», è¿˜æ˜¯ä¸ç»§ç»­æ–½å·¥äº†.&lt;/p&gt;
&lt;/blockquote&gt;

        
        </description>
    </item>
    
    <item>
      <title>å¦‚ä½•å®ç° JavaScript å‡½æ•°å‚æ•°å¿…å¡«çš„æ”¯æŒ?</title>
      <link>https://joeytat.github.io/posts/js_required_property/</link>
      <pubDate>Mon, 03 Jun 2019 00:00:00 +0000</pubDate>
      
      <guid>https://joeytat.github.io/posts/js_required_property/</guid>
      <description>
        
          
          
          
        
        
        &lt;p&gt;JS åœ¨ ES6 çš„ä¸­æ–°å¢äº†å‡½æ•°å‚æ•°æŒ‡å®šé»˜è®¤å€¼çš„æ”¯æŒ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Greeting&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Joeytat&amp;#34;&lt;/span&gt;) =&amp;gt; {
  &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;`Hello &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;)
}
&lt;span style=&#34;color:#a6e22e&#34;&gt;Greeting&lt;/span&gt;() &lt;span style=&#34;color:#75715e&#34;&gt;// Hello Joeytat
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é‚£æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‰¹æ€§, å°†ä¸€ä¸ªä¼šæŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ä½œä¸ºé»˜è®¤å‚æ•°ä¼ é€’.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Greeting&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;EmptyPropertyException&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;)) =&amp;gt; {
  &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;`Hello &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;)
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;EmptyPropertyException&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;propertyName&lt;/span&gt;) =&amp;gt; {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;throw&lt;/span&gt; Error(&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;propertyName&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; ä¸ºå¿…å¡«å‚æ•°`&lt;/span&gt;)
}

&lt;span style=&#34;color:#a6e22e&#34;&gt;Greeting&lt;/span&gt;() &lt;span style=&#34;color:#75715e&#34;&gt;// æŠ›å‡ºå¼‚å¸¸: &amp;#34;Error: name ä¸ºå¿…å¡«å‚æ•°&amp;#34;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·å¦‚æœæ²¡æœ‰ä¼ é€’å‚æ•°å°±ä¼šæŠ›å‡ºå¼‚å¸¸, å¹¶ä¸”å¸¦æœ‰å‹å¥½çš„æç¤ºäº†.&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>2018</title>
      <link>https://joeytat.github.io/posts/2018_overview/</link>
      <pubDate>Fri, 28 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>https://joeytat.github.io/posts/2018_overview/</guid>
      <description>
        
          
          
          
        
        
        &lt;p&gt;åˆšæ¯•ä¸šé‚£é˜µå„¿è¿˜æ¯å¹´éƒ½å†™å¥½é•¿çš„æ€»ç»“, ç„¶åè¿™ä¸¤å¹´å˜æ‡’äº†. ä»Šå¹´åˆæƒ³å†è®°å½•ä¸€ä¸‹äº†å˜¿ | á•)â¾â¾&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¹´åº¦ App: &lt;a href=&#34;https://www.duolingo.com&#34;&gt;å¤šé‚»å›½&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;é›¶åŸºç¡€å­¦è¯­è¨€çš„æ„Ÿè§‰å¾ˆä¸é”™.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¹´åº¦ç”µå½±: &lt;a href=&#34;https://movie.douban.com/subject/26611804/&#34;&gt;ã€Šä¸‰å—å¹¿å‘Šç‰Œã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¹´åº¦æ¼«ç”»: &lt;a href=&#34;https://zh.wikipedia.org/wiki/%E5%8F%AA%E6%9C%89%E6%88%91%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%9F%8E%E5%B8%82&#34;&gt;ã€Šåªæœ‰æˆ‘ä¸å­˜åœ¨çš„åŸå¸‚ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¿˜äº†åœ¨å“ªè¢«äººæ¨èçš„äº†, è¢«å®‰åˆ©åˆ°çš„è¯å¤§æ¦‚æ˜¯è¿™ä¹ˆè¯´çš„ã€Œéå¸¸åº†å¹¸åœ¨æ²¡æœ‰è¢«å‰§é€çš„æƒ…å†µä¸‹ä¸€å£æ°”çœ‹å®Œäº†ã€. çœ‹å®Œäº†ä¹‹åæ„Ÿè§‰æœç„¶å¦‚æ­¤. è€Œä¸”æ¼«ç”»çœŸæ˜¯å­˜åœ¨ç€åŠ¨ç”»æ— æ³•è¡¨ç°å‡ºçš„èŠ‚å¥æ„Ÿå•Š.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¹´åº¦æ¸¸æˆ: &lt;a href=&#34;https://zh.wikipedia.org/wiki/%E7%A5%9E%E7%95%8C%EF%BC%9A%E5%8E%9F%E7%BD%AA2&#34;&gt;ã€Šç¥ç•ŒåŸç½ª 2ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¥è§¦çš„ç¬¬ä¸€æ¬¾ CRPG, æœ‰è¶£åˆ°ä»€ä¹ˆç¨‹åº¦å‘¢? ä»æ¸¸æˆä½“éªŒæ—¶å‘å‡ºã€Œwow, å±…ç„¶è¿˜èƒ½è¿™æ ·?ã€çš„é¢‘ç‡æ¥çœ‹, å’Œã€Šå¡å°”è¾¾: æ—·é‡ä¹‹æ¯ã€‹å·®ä¸å¤šå§.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¹´åº¦è™šæ„ç±»å›¾ä¹¦: ã€Šå‰‘æ¥ã€‹&lt;/p&gt;
&lt;p&gt;ä¸çŸ¥é“ä¸ºå•¥ç°åœ¨æèµ·ç½‘ç»œæ–‡å­¦, å¤šæ•°æ—¶å€™å¯¹æ–¹éƒ½è¿˜æ˜¯è§‰å¾—ã€Œæ ¼ã€ä¸å¤Ÿ. å¯ç°åœ¨çš„ç½‘ç»œå°è¯´ä¸ã€Šæ˜æŠ¥ã€‹è¿è½½çš„æ­¦ä¾ å°è¯´, æœ‰å¤šå¤§çš„åŒºåˆ«?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¹´åº¦éè™šæ„ç±»å›¾ä¹¦: &lt;a href=&#34;https://book.douban.com/subject/27091742/&#34;&gt;ã€Šé‚»äººä¹‹å¦»ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘å§“ç‹å’Œæˆ‘çœ‹è¿™æœ¬ä¹¦æ²¡æœ‰ä»»ä½•è”ç³»(è®¤çœŸè„¸), çœŸçš„æ˜¯å¥½å¥‡æ€§ç¾å›½è§£æ”¾è¿åŠ¨åˆ°åº•æ˜¯æ€ä¹ˆäº§ç”Ÿçš„è€Œçœ‹çš„.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¹´åº¦ç”µå™¨: Sony 9000E ç”µè§†&lt;/p&gt;
&lt;p&gt;å¤§å±å¹• 4k HDR çš„å…¨æ–°ä½“éªŒè®©æˆ‘æƒ³æŠŠä¹‹å‰åœ¨æ˜¾ç¤ºå™¨ä¸Šç©çš„å¥½æ¸¸æˆçœ‹çš„å¥½ç”µå½±éƒ½é‡æ–°æ¥ä¸€æ¬¡.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¹´åº¦éŸ³ä¹: &lt;a href=&#34;http://music.163.com/song/443875380/?userid=564654&#34; title=&#34;@ç½‘æ˜“äº‘éŸ³ä¹&#34;&gt;ã€Šç”Ÿãã¦ã„ãŸã‚“ã ã‚ˆãª(å¥¹æ›¾æ´»è¿‡å•Š)ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ­Œè¯å¾ˆæ£’? çœ‹åˆ°å¹´åº¦éŸ³ä¹å››ä¸ªå­—, è„‘å­é‡Œç¬¬ä¸€é¦–å‡ºç°çš„æ­Œ.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¹´åº¦è§†é¢‘: äº•è¶Šçš„ vlogâ€”â€”&lt;a href=&#34;https://www.bilibili.com/video/av17898771/&#34;&gt;ã€Šåˆ«å†é—®æˆ‘ä»€ä¹ˆæ˜¯ 2017ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;çœ‹äº†å‡ åä¸ª Casey Neistat çš„ vlog ä¹Ÿæ²¡èƒ½è®©è‡ªå·±è¡ŒåŠ¨èµ·æ¥ç”¨è§†é¢‘è®°å½•ç”Ÿæ´». ä½†çœ‹å®Œè¿™ä¸ªè§†é¢‘çš„ç¬¬äºŒå¤©, å°±å¼€å§‹å°è¯•ç€åœ¨å¤§è¡—ä¸Šå¯¹ç€æ‰‹æœºé•œå¤´è¯´è¯å•¦.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¹´åº¦ç”µå­äº§å“: iPhoneX&lt;/p&gt;
&lt;p&gt;ç”¨æ¥æ‹äº†ä¸å°‘è§†é¢‘, ç…§ç‰‡. äººåƒæ¨¡å¼æ‹å‡ºçš„ç…§ç‰‡, ä¼šè®©æˆ‘è¿™ä¸ªæ‘„å½±é—¨å¤–æ±‰äº§ç”Ÿä¸€ç§ã€Œè‡ªå·±æ‹çš„è¿˜ä¸é”™å˜›ã€çš„é”™è§‰, ä»è€Œè¾¾åˆ°äº†è¦ç»å¸¸æå‡ºæ‰‹æœºè®°å½•ç”Ÿæ´»çš„ç›®æ ‡.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›æ˜å¹´ä¹Ÿèƒ½å¤šåˆ›é€ ä¸€äº›ä¸œè¥¿, èƒ½å¤Ÿåœ¨ 19 å¹´çš„å¹´ç»ˆæ€»ç»“ä¸­, é€‰å‡ºè‡ªå·±æ»¡æ„çš„å¹´åº¦ XXX å§&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>ä¸ºä»€ä¹ˆ Cocoapods 1.5 æ”¯æŒç¼–è¯‘é™æ€åº“ä¹‹åå¤§å®¶è¿™ä¹ˆé«˜å…´?</title>
      <link>https://joeytat.github.io/posts/cocoapods-1.5-static-library/</link>
      <pubDate>Thu, 27 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>https://joeytat.github.io/posts/cocoapods-1.5-static-library/</guid>
      <description>
        
          
          
          
        
        
        &lt;p&gt;æ˜¨å¤©åœ¨ Twitter ä¸Šçœ‹åˆ° TualatriX è¯´&lt;a href=&#34;https://twitter.com/tualatrix/status/1077166131956264960&#34;&gt;æŠŠç§æœ‰åº“éƒ½é€šè¿‡ Cocoapods ç¼–è¯‘æˆé™æ€åº“ä¹‹åå¾ˆçˆ½&lt;/a&gt;, å°±æœ‰ç‚¹å¥½å¥‡åˆ°åº•æ˜¯çˆ½åœ¨å“ªé‡Œ.&lt;/p&gt;
&lt;p&gt;äºæ˜¯å»æœäº†ä¸€ä¸‹, åŸæ¥æ˜¯å‰æ®µæ—¶é—´(å¤§åŠå¹´å‰å§&amp;hellip;), Cocoapods å‘å¸ƒäº† 1.5 çš„ &lt;a href=&#34;http://blog.cocoapods.org/CocoaPods-1.5.0/&#34;&gt;release note&lt;/a&gt;, å®£å¸ƒæ”¯æŒ Swift é™æ€åº“ç¼–è¯‘. å¹¶ä¸”æ–‡ä¸­æåˆ°äº†å¯¹äºæ‹…å¿ƒåŠ¨æ€äºŒè¿›åˆ¶æ–‡ä»¶å½±å“åº”ç”¨å¯åŠ¨é€Ÿåº¦çš„äººæ¥è¯´, è¿™æ˜¯ä¸ªäº†ä¸èµ·çš„æ›´æ–°.
jh
é‚£åˆæ˜¯ä¸ºä»€ä¹ˆ App ä½¿ç”¨é™æ€åº“ä¼šæ¯”åŠ¨æ€åº“æœ‰æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦å‘¢? åˆè·‘å»æœäº†ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£. æ‰“å¼€ &lt;a href=&#34;https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/OverviewOfDynamicLibraries.html&#34;&gt;Dynamic Library Programming Topics&lt;/a&gt; å¼€å¤´å°±çœ‹åˆ°:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This article introduces dynamic libraries and shows how using dynamic libraries instead of static libraries reduces both the file size and initial memory footprint of the apps that use them.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»äº†åŠ¨æ€åº“, å¹¶ä¸”å±•ç¤ºäº†é€šè¿‡&lt;strong&gt;ä½¿ç”¨åŠ¨æ€åº“&lt;/strong&gt;è€Œä¸æ˜¯é™æ€åº“, æ˜¯å¦‚ä½•&lt;strong&gt;ç¼©å‡&lt;/strong&gt;äº†åº”ç”¨çš„å¤§å°å’Œåˆå§‹å†…å­˜ç©ºé—´çš„.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;http://ww1.rs.fanjian.net/c/ab/c8/25/53abf0c06ec808c1fe250d3565ff0d32.jpg&#34; alt=&#34;é»‘äººé—®å·&#34;&gt;&lt;/p&gt;
&lt;p&gt;â”»â”â”» (ãƒ½(`Ğ” Ì)ãƒ( â”»â”â”»  è¿™å’Œè¯´å¥½çš„ä¸ä¸€æ ·å•Š?&lt;/p&gt;
&lt;p&gt;å¸¦ç€ç–‘é—®æˆ‘åˆè·‘å»çœ‹äº†ä¸€ä¸‹è‹¹æœçš„ &lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2016/406&#34;&gt;WWDC 2016 -  Optimizing App Startup Time&lt;/a&gt; çš„è§†é¢‘, è¿™æ¬¡é—®é¢˜ç»ˆäºå¾—åˆ°äº†è§£å†³.&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„åº“æ˜¯ä»€ä¹ˆ? æ˜¯å¯æ‰§è¡Œæ–‡ä»¶çš„é›†åˆ. é™æ€åº“ä¸åŠ¨æ€åº“è°ƒç”¨æ—¶æœºçš„åŒºåˆ«åœ¨äº, é™æ€åº“åœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™, ä¼šå’Œç¨‹åºçš„å¯æ‰§è¡Œä»£ç ä¸€èµ·, è¢«åŠ è½½åˆ°åº”ç”¨çš„å†…å­˜ç©ºé—´ä¸­. è¿™å°±ä¼šå¯¼è‡´åº”ç”¨å¯åŠ¨æ…¢, å¹¶ä¸”å†…å­˜å ç”¨å¤§. è€ŒåŠ¨æ€åº“åˆ™æ˜¯åœ¨ä»£ç çœŸæ­£è¢«éœ€è¦è°ƒç”¨çš„æ—¶å€™, æ‰åŠ è½½åˆ°å†…å­˜ä¸­.&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æ‰ä¼šæœ‰è‹¹æœæ–‡æ¡£ä¸­æåˆ°çš„ã€Œé€šè¿‡&lt;strong&gt;ä½¿ç”¨åŠ¨æ€åº“&lt;/strong&gt;è€Œä¸æ˜¯é™æ€åº“, æ˜¯å¦‚ä½•&lt;strong&gt;ç¼©å‡&lt;/strong&gt;äº†åº”ç”¨çš„å¤§å°å’Œåˆå§‹å†…å­˜ç©ºé—´çš„ã€è¿™å¥è¯.&lt;/p&gt;
&lt;p&gt;å¯è¿™æ˜¯ç«™åœ¨ç³»ç»Ÿè§’åº¦æ¥è¯´çš„. åœ¨ iOS ä¸­, å¹³å‡æ¯ä¸ª App åŒ…å«äº† &lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2016-406/?time=1684&#34;&gt;1 åˆ° 400&lt;/a&gt; ä¸ªåŠ¨æ€åº“. å…¶ä¸­æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯ç³»ç»Ÿçº§åŠ¨æ€åº“. è‹¹æœä¸ºå…¶åšäº†è®¸å¤šçš„ä¼˜åŒ–, æ¯”å¦‚æå‰è®¡ç®—, æå‰ç¼“å­˜ç­‰. è¿™å¯¹äºç³»ç»Ÿæä¾›çš„åŠ¨æ€åº“æ¥è¯´, å½“ç„¶æ¯”é™æ€åº“æ›´å¿«.&lt;/p&gt;
&lt;p&gt;ä½† App ä¸­è¿˜åŒ…å«äº†å¾ˆå¤šè‡ªæœ‰çš„åŠ¨æ€åº“, è¿™éƒ¨åˆ†åŠ¨æ€åº“è‹¹æœæ²¡æœ‰åŠæ³•ä¸ºæœŸæä¾›ä¼˜åŒ–. è€Œå¯¹äº dylib çš„åŠ è½½åˆæ˜¯éå¸¸è€—è´¹èµ„æºçš„. æ‰€ä»¥è‹¹æœå¯¹å…¶çš„å»ºè®®æ˜¯æœ€å¥½åœ¨ &lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2016-406/?time=1794&#34;&gt;6&lt;/a&gt; ä¸ªå·¦å³.&lt;/p&gt;
&lt;p&gt;ç„¶åæˆ‘ä¹ŸæŠŠé¡¹ç›®ä¸­çš„ Swift pods ç¼–è¯‘ä¸ºé™æ€åº“äº†, æ•ˆæœå¦‚ä¸‹.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// ä¼˜åŒ–å‰
[DYMTLInitPlatform] platform initialization successful
Total pre-main time: 1.5 seconds (100.0%)
         dylib loading time: 968.07 milliseconds (61.1%)
        ......
        ......
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// Pods ä½¿ç”¨é™æ€åº“å
[DYMTLInitPlatform] platform initialization successful
Total pre-main time: 1.1 seconds (100.0%)
         dylib loading time: 520.52 milliseconds (47.2%)
        ......
        ......
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ€åå†æ€»ç»“ä¸€ä¸‹.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºç³»ç»Ÿæä¾›äº†ä¼˜åŒ–çš„åŠ¨æ€åº“æ¥è¯´, ä¸€å®šæ˜¯æ¯”é™æ€åº“å¯åŠ¨åŠ è½½å¿«ä¸”å ç”¨å†…å­˜æ›´å°çš„. 14er&lt;/li&gt;
&lt;li&gt;è€Œå¯¹äº App è‡ªæœ‰çš„åŠ¨æ€åº“æ¥è¯´, ç³»ç»Ÿåœ¨åŠ è½½åŠ¨æ€åº“æ‰€æ¶ˆè€—çš„èµ„æºè¦æ¯”åŠ è½½é™æ€åº“æ¥å¾—å¤š, æ‰€ä»¥æœ€å¥½é™åˆ¶åœ¨ 6 ä¸ªå·¦å³.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒé“¾æ¥&#34;&gt;
  å‚è€ƒé“¾æ¥
  &lt;a href=&#34;#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jianshu.com/p/3d0ae289dee0&#34;&gt;Cocoapods çš„é™æ€åº“å’ŒåŠ¨æ€åº“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2016/406/?time=203&#34;&gt;WWDC 2016 - Optimizing App Startup Time&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/OverviewOfDynamicLibraries.html&#34;&gt;Dynamic Library Programming Topics&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tech.meituan.com/waimai_ios_optimizing_startup.html&#34;&gt;ç¾å›¢å¤–å– iOS Appå†·å¯åŠ¨æ²»ç†&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

        
        </description>
    </item>
    
  </channel>
</rss>