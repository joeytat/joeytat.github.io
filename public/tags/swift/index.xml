<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Swift on Dev Log</title>
    
    
    
    <link>http://localhost:1313/tags/swift/</link>
    <description>Recent content in Swift on Dev Log</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Fri, 02 Jun 2023 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="http://localhost:1313/tags/swift/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>æ„å»ºæ˜“ç»´æŠ¤çš„ Design System: ä¸ºä»€ä¹ˆ SwiftUI ä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©</title>
      <link>http://localhost:1313/posts/why-swiftui-is-better-at-building-a-design-system/</link>
      <pubDate>Fri, 02 Jun 2023 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/posts/why-swiftui-is-better-at-building-a-design-system/</guid>
      <description>
        
          
          
          
        
        
        &lt;p&gt;&lt;code&gt;SwiftUI&lt;/code&gt; è‡ª iOS 13 å‘å¸ƒä»¥æ¥ï¼Œè™½ç„¶å·²ç»é¢å‘å…¬ä¼—è¿‘ 4 å¹´ï¼Œä½†ç”±äºåœ¨å®ç°å¤æ‚å¸ƒå±€æ—¶çš„æ€§èƒ½ä¸ä½³ï¼Œä»¥åŠå› å…¶å†…ç½®ç»„ä»¶çš„åº•å±‚å®ç°å˜æ›´ï¼ˆiOS 16 ä¸Š &lt;code&gt;List&lt;/code&gt; çš„åº•å±‚å®ç°ä» &lt;code&gt;UITableView&lt;/code&gt; æ”¹æˆäº† &lt;code&gt;UICollectionView&lt;/code&gt; ï¼‰ï¼Œå¯¼è‡´å¼€å‘è€…ä»¬åŸæœ¬è‰¯å¥½è¿è¡Œä»£ç éšç³»ç»Ÿå‡çº§è¢«ç ´åäº†ã€‚iOS 14 ä¹‹å‰ SwiftUI çš„å¼€å‘è€…ä½“éªŒä¹Ÿè®©äººä¸€è¨€éš¾å°½ã€‚å°½ç®¡æœ‰å¾ˆå¤šçš„æ§½ç‚¹ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯èƒ½å‘ç°ç¤¾åŒºæ•´ä½“ä¸Šè¿˜æ˜¯æ¯”è¾ƒæ¥çº³ SwiftUIã€‚æ‰€ä»¥å¦‚æœä½ å¯¹ SwiftUI è¿˜æœ‰æ‰€çŠ¹è±«ï¼Œä¸æ¸…æ¥šä¸ºä½•è¦ä½¿ç”¨å®ƒï¼Œè¿™ç¯‡æ–‡ç« æˆ–è®¸èƒ½å¤Ÿå¸¦æ¥ä¸€äº›æ–°çš„æƒ³æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡æ–‡ç« ä¸»è¦æ˜¯æƒ³è¦é€šè¿‡ Design System ä¸ºåˆ‡å…¥ç‚¹ï¼ŒåŒå¤§å®¶è®¨è®ºç›¸æ¯”èµ· UIKitï¼Œä¸ºä»€ä¹ˆæ›´æ¨èä½¿ç”¨ SwiftUI æ¥å®ç°å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ä¸‹çš„ UI ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆç®€å•æ¦‚æ‹¬ä¸€ä¸‹ Design System æ˜¯ä»€ä¹ˆï¼ŒDesign System æ˜¯ä¸€ä¸ªåŒ…å«äº†è®¾è®¡åŸåˆ™ã€ç»„ä»¶åº“å’Œä»£ç èµ„æºç­‰ç³»ç»ŸåŒ–çš„æŒ‡å¯¼ï¼Œæ—¨åœ¨ä¿ƒè¿›å›¢é˜Ÿé—´çš„åä½œå’Œæé«˜é¡¹ç›®çš„ä¸€è‡´æ€§ã€‚å®ƒå¯ä»¥å¸®åŠ©å›¢é˜Ÿæ›´å¿«é€Ÿã€é«˜æ•ˆåœ°æ„å»ºåº”ç”¨ç¨‹åºï¼ŒåŒæ—¶ç¡®ä¿åº”ç”¨ç¨‹åºçš„å¤–è§‚å’Œäº¤äº’ä¿æŒä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°±è¿›å…¥æ­£é¢˜ï¼Œä»ä»¥ä¸‹å‡ ç‚¹æ¥æ¢è®¨ä¸€ä¸‹é€šè¿‡ SwiftUI æ„å»º Design System æœ‰å“ªäº›ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å£°æ˜å¼è¯­æ³•ä¼šæ›´å…·æœ‰å¯è¯»æ€§å’Œæ˜“äºå®ç°&lt;/li&gt;
&lt;li&gt;å†…å»ºçš„ä¸€è‡´æ€§å’Œç»Ÿä¸€æ€§è¡¨è¾¾&lt;/li&gt;
&lt;li&gt;å•å‘æ•°æ®æµå¸¦æ¥çš„å¯é¢„æµ‹æ€§&lt;/li&gt;
&lt;li&gt;ä¸ Design System æœ‰æ›´ç›¸ä¼¼çš„å“²å­¦æ€æƒ³&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å£°æ˜å¼è¯­æ³•ä¼šæ›´å…·æœ‰å¯è¯»æ€§å’Œæ˜“äºå®ç°&#34;&gt;
  å£°æ˜å¼è¯­æ³•ä¼šæ›´å…·æœ‰å¯è¯»æ€§å’Œæ˜“äºå®ç°
  &lt;a href=&#34;#%e5%a3%b0%e6%98%8e%e5%bc%8f%e8%af%ad%e6%b3%95%e4%bc%9a%e6%9b%b4%e5%85%b7%e6%9c%89%e5%8f%af%e8%af%bb%e6%80%a7%e5%92%8c%e6%98%93%e4%ba%8e%e5%ae%9e%e7%8e%b0&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆä»å®ç°å’Œç»´æŠ¤æˆæœ¬ä¸Šæ¥è¯´ï¼ŒSwiftUI ä¸ Apple ç°æœ‰çš„ UIKit å’Œ AppKit ä¸åŒï¼ŒSwiftUI é‡‡ç”¨äº†å£°æ˜å¼è¯­æ³•æ„å»º UIã€‚ç”±äºå£°æ˜å¼è¯­æ³•æ›´å…³æ³¨äºæè¿° UI çš„æœ€ç»ˆæ•ˆæœï¼Œè€Œä¸æ˜¯å…·ä½“å®ç°æ–¹å¼ã€‚è¿™ä½¿å¾—é€šè¿‡å£°æ˜å¼è¯­æ³•ç¼–å†™çš„ UI ç»„ä»¶æ›´å…·å¯è¯»æ€§ï¼Œæœ‰åŠ©äºå›¢é˜Ÿæ›´å¥½åœ°åä½œå®ç° Design Systemã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// SwiftUI&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;VStack(spacing: &lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        .font(.largeTitle)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;World&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        .font(.largeTitle)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.foregroundColor(.blue)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// UIKit&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; stackView = UIStackView()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;stackView.axis = .vertical
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;stackView.spacing = &lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; helloLabel = UILabel()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;helloLabel.text = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;helloLabel.font = UIFont.systemFont(ofSize: &lt;span style=&#34;color:#ae81ff&#34;&gt;34&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;stackView.addArrangedSubview(helloLabel)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; worldLabel = UILabel()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;worldLabel.text = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;World&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;worldLabel.font = UIFont.systemFont(ofSize: &lt;span style=&#34;color:#ae81ff&#34;&gt;34&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;stackView.addArrangedSubview(worldLabel)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;stackView.backgroundColor = .blue
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é™¤äº†ä»£ç æ•°é‡ä¸Šçš„å·®è·ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ SwiftUI ç¤ºä¾‹ä¸­é€šè¿‡ä»£ç ç»“æ„å°±ç›´è§‚åœ°æ„Ÿå—åˆ° UI ç»„ä»¶æ˜¯å¦‚ä½•è¢«æ’åˆ—çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å†…å»ºçš„ä¸€è‡´æ€§å’Œç»Ÿä¸€æ€§è¡¨è¾¾&#34;&gt;
  å†…å»ºçš„ä¸€è‡´æ€§å’Œç»Ÿä¸€æ€§è¡¨è¾¾
  &lt;a href=&#34;#%e5%86%85%e5%bb%ba%e7%9a%84%e4%b8%80%e8%87%b4%e6%80%a7%e5%92%8c%e7%bb%9f%e4%b8%80%e6%80%a7%e8%a1%a8%e8%be%be&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;åœ¨ SwiftUI ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;code&gt;View Modifier&lt;/code&gt; æ¥å®ç°å¯¹ UI ç»„ä»¶çš„ç»Ÿä¸€æ€§è¡¨è¾¾ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// SwiftUI&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Button(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Primary&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// action&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.buttonStyle(PrimaryButtonStyle())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Button(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Secondary&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// action&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.buttonStyle(SecondaryButtonStyle()) &lt;span style=&#34;color:#75715e&#34;&gt;// å½“ Primaryï¼Œ æˆ– Secondary style å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰ä½¿ç”¨äº†è¿™ä¸¤ä¸ª style çš„æŒ‰é’®éƒ½ä¼šè¢«è‡ªåŠ¨æ›´æ–°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// UIKit&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; primaryButton = UIButton()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;primaryButton.setTitle(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Primary&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;: .normal)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;primaryButton.titleLabel?.font = UIFont.systemFont(ofSize: &lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;primaryButton.backgroundColor = UIColor.blue
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;primaryButton.layer.cornerRadius = &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; secondaryButton = UIButton()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;secondaryButton.setTitle(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Secondary&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;: .normal)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;secondaryButton.titleLabel?.font = UIFont.systemFont(ofSize: &lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;secondaryButton.backgroundColor = UIColor.gray
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;secondaryButton.layer.cornerRadius = &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ° SwiftUI é¢„å®šä¹‰çš„è®¾è®¡è§„èŒƒï¼Œä½¿å¼€å‘è€…æ›´æ˜“äºè¡¨è¾¾å’Œä¿è¯ Design System çš„ç»Ÿä¸€æ€§ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶å¼€å‘è€…ä¹Ÿå¯ä»¥å¯¹ UIKit çš„ UI ç»„ä»¶è¿›è¡Œå°è£…ï¼Œå®ç°ç±»ä¼¼ SwiftUI View Modifier çš„æ•ˆæœã€‚ä½†æ˜¯ SwiftUI çš„ View Modifier æ˜¯å†…åœ¨è€¦åˆçš„ï¼Œä¼šå¤©ç„¶å…·æœ‰æ›´å¥½çš„ä¸€è‡´æ€§ã€‚è€Œå¯¹ UIKit è¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œä»éœ€ä¾èµ–äºå¼€å‘è€…è‡ªè§‰éµå¾ªè®¾è®¡è§„èŒƒï¼Œéš¾å…ä¼šäº§ç”Ÿç–å¿½çš„æƒ…å†µï¼Œå½±å“æœ€ç»ˆ UI çš„ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å•å‘æ•°æ®æµå¸¦æ¥çš„å¯é¢„æµ‹æ€§&#34;&gt;
  å•å‘æ•°æ®æµå¸¦æ¥çš„å¯é¢„æµ‹æ€§
  &lt;a href=&#34;#%e5%8d%95%e5%90%91%e6%95%b0%e6%8d%ae%e6%b5%81%e5%b8%a6%e6%9d%a5%e7%9a%84%e5%8f%af%e9%a2%84%e6%b5%8b%e6%80%a7&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;SwiftUI æ‰€ç¼–å†™çš„ UI ç»„ä»¶æ›´å…·æœ‰å¯é¢„æµ‹æ€§ã€‚ä½“ç°åœ¨å…¶éµå¾ªå•å‘æ•°æ®æµåŸåˆ™ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å› ä¸ºçŠ¶æ€ç®¡ç†å¤æ‚æ€§å¯¼è‡´çš„ UI é”™è¯¯ã€‚åŒæ—¶ UI ç»„ä»¶çš„æ ·å¼æ˜¯é€šè¿‡é«˜é˜¶å‡½æ•°æˆ–ç»„åˆæ¥åˆ›å»ºçš„ï¼Œè€Œä¸æ˜¯é€šè¿‡å‰¯ä½œç”¨æˆ–éšå¼è§„åˆ™åˆ›å»ºï¼Œè¿™ä½¿å¾—å¼€å‘è€…æ›´å®¹æ˜“è¯†åˆ«ç»„ä»¶ä¼šå…·å¤‡å“ªäº›æ ·å¼åŠå…¶æ¥æºã€‚&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”ä¹‹ä¸‹ UIKit ä½œä¸ºå‘½ä»¤å¼ UI æ¡†æ¶ï¼Œå…¶ UI æ¸²æŸ“è¿‡ç¨‹åˆ™ç›¸å¯¹å¤æ‚å’Œéš¾ä»¥é¢„æµ‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;çŠ¶æ€å˜åŒ–ä¼šå¯¼è‡´éš¾ä»¥è·Ÿè¸ªçš„å‰¯ä½œç”¨ï¼Œè¿™ä½¿ UI æ›´æ˜“å‡ºé”™ä¸”éš¾ä»¥è°ƒè¯•ã€‚&lt;/li&gt;
&lt;li&gt;æ ·å¼è§„åˆ™ç”±å¼€å‘è€…è‡ªè¡Œå®šä¹‰å¹¶åº”ç”¨ï¼Œå­˜åœ¨è¾ƒå¤§éšæ„æ€§ï¼Œé˜…è¯»å’Œç†è§£èµ·æ¥ä¹Ÿæ›´åŠ å›°éš¾ã€‚&lt;/li&gt;
&lt;li&gt;æ ·å¼çš„æ¥æºå’Œåº”ç”¨ä¸åƒ SwiftUI é‚£æ ·æ¸…æ™°ï¼Œéœ€è¦å¼€å‘è€…è‡ªè¡Œç†æ¸…å„ä¸ªæ ·å¼è§„åˆ™ä¹‹é—´çš„å…³ç³»ï¼Œä»¥ç¡®ä¿ UI çš„æ­£ç¡®æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ›´ç›¸ä¼¼çš„å“²å­¦æ€æƒ³&#34;&gt;
  æ›´ç›¸ä¼¼çš„å“²å­¦æ€æƒ³
  &lt;a href=&#34;#%e6%9b%b4%e7%9b%b8%e4%bc%bc%e7%9a%84%e5%93%b2%e5%ad%a6%e6%80%9d%e6%83%b3&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;SwiftUI ä¸­ç»„åˆå’Œå‡½æ•°å¼çš„æ€æƒ³ä¸ Design System ä¸­åŸå­ç»„ä»¶å’Œç»„åˆçš„åŸåˆ™ç›¸å»åˆã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸¤è€…éƒ½å€¾å‘äºæ„å»ºå‡ºå°çš„ã€è‡ªæ´½çš„å•ä½ï¼Œç„¶åé€šè¿‡ç»„åˆæ¥åˆ›å»ºæ›´ä¸ºå¤æ‚çš„ç»“æ„ï¼ŒSwiftUI ä¸­çš„è§†å›¾å’Œ Modifier å°±æ˜¯è¿™ç§å•ä½å’Œç»„åˆçš„ä½“ç°ã€‚&lt;/li&gt;
&lt;li&gt;ç»„ä»¶å’Œå‡½æ•°éƒ½æ˜¯å¯ä»¥æ˜¯é€šç”¨çš„æˆ–å®šåˆ¶çš„ï¼ŒåŒæ—¶å¯ä»¥å°†å…¶é‡å¤ä½¿ç”¨æˆ–ç»„åˆã€‚åœ¨ SwiftUI ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºé€šç”¨çš„ Modifier å’Œè§†å›¾ï¼Œä¹Ÿå¯ä»¥ä¸ºæŸä¸€å…·ä½“è§†å›¾å®šåˆ¶ç‰¹æœ‰çš„ Modifierã€‚&lt;/li&gt;
&lt;li&gt;å½“æ”¹å˜åŸºç¡€å•ä½(å¦‚å­—å·ï¼Œé—´è·ç­‰åŸºç¡€å•ä½)ä¼šä»¥å¯æ§æ–¹å¼å½±å“æ‰€æœ‰ç»„åˆã€‚å¦‚æœæˆ‘ä»¬æ”¹å˜ä¸€ä¸ª Modifier çš„è¡Œä¸ºæˆ–å±æ€§ï¼Œæ‰€æœ‰åº”ç”¨è¯¥ Modifier çš„è§†å›¾å°†ä¼šç›¸åº”æ”¹å˜ã€‚è¿™ä½¿å¾—åœ¨è®¾è®¡ç³»ç»Ÿä¸­è°ƒæ•´ç»†èŠ‚æ—¶ï¼Œæ›´æ˜“é¢„æµ‹å’Œæ§åˆ¶å…¶å½±å“èŒƒå›´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è€Œç›¸æ¯”ä¹‹ä¸‹ï¼ŒUIKit ä½œä¸ºå‘½ä»¤å¼æ¡†æ¶ï¼Œå…¶ UI æ„å»ºæ–¹å¼åˆ™ç›¸å¯¹é›¶æ•£å’Œéšæ„:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ„å»º UI æ—¶ï¼Œå¼€å‘è€…è‡ªè¡Œå†³å®šç»„è£…å“ªäº›æ§ä»¶å’Œè®¾ç½®ä½•ç§å±æ€§ï¼Œéš¾ä»¥éµå¾ªç»Ÿä¸€çš„ç»„åˆè§„åˆ™ã€‚&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰ç±»ä¼¼ Modifier çš„æœºåˆ¶ï¼Œæ¯ä¸ªè§†å›¾çš„æ ·å¼éƒ½éœ€è¦å•ç‹¬è®¾ç½®ï¼Œæ— æ³•åœ¨å¤šå¤„é‡å¤ä½¿ç”¨ã€‚è¿™ä½¿å¾—è°ƒæ•´æ ·å¼æ—¶ï¼Œéœ€è¦é€ä¸ªä¿®æ”¹æ¯ä¸ªè§†å›¾ï¼Œéš¾ä»¥é«˜æ•ˆåœ°åº”ç”¨è®¾è®¡å˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;å±æ€§çš„å˜åŒ–å¹¶ä¸ä¸€å®šä¼šå½±å“æ‰€æœ‰ç›¸å…³è§†å›¾ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±å†é€ä¸ªå¯¹åº”ç”¨çš„è§†å›¾åšå‡ºä¿®æ”¹ã€‚è¿™åŠ å¤§äº†è®¾è®¡ç³»ç»Ÿç»´æŠ¤çš„éš¾åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æœ€å&#34;&gt;
  æœ€å
  &lt;a href=&#34;#%e6%9c%80%e5%90%8e&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;è¿˜éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæœ¬æ–‡åªæ˜¯æƒ³æ¢è®¨åœ¨å®ç°ç§»åŠ¨å¹³å°çš„ Design System æ—¶ç›¸æ¯”èµ· UIKitï¼ŒSwiftUI æ‰€å…·æœ‰çš„ä¸€å®šä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æŸäº›å¤æ‚çš„åœºæ™¯ä¸‹ï¼ŒUIKit è¿™æ ·å‘½ä»¤å¼çš„ UI æ¡†æ¶çš„çµæ´»æ€§å’Œæ€§èƒ½å¯èƒ½ä¼šæ›´å¼ºã€‚æ‰€ä»¥éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSwiftUI çš„ç»„ä»¶çŠ¶æ€å’Œè¡Œä¸ºéƒ½æ˜¯ç”±æ•°æ®é©±åŠ¨ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå¦‚å¤§é‡çš„æ•°æ®ç»‘å®šå’Œæ›´æ–°å¯èƒ½ä¼šå¼•èµ· UI ç•Œé¢çš„å¡é¡¿å’Œå»¶è¿Ÿã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒUIKit æ¥è¿‘åº•å±‚æ¸²æŸ“æœºåˆ¶ï¼Œæ€§èƒ½è¡¨ç°å¯èƒ½æ›´ä½³ã€‚ä½† SwiftUI ä¹Ÿæœ‰å®ç°è·¨å¹³å°éœ€æ±‚çš„ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é€‰æ‹©å…·ä½“å“ªä¸ªæ¡†æ¶å®ç° Design System æ—¶ï¼Œå¼€å‘è€…è¿˜æ˜¯å¾—æ ¹æ®å…·ä½“éœ€æ±‚ï¼Œæƒè¡¡ä¸¤è€…ä¹‹é—´çš„ä¼˜ç¼ºç‚¹ã€‚åœ¨è¿½æ±‚æ€§èƒ½æˆ–éœ€è¦é«˜åº¦å®šåˆ¶åŒ–çš„åœºæ™¯ä¸‹ï¼ŒUIKit çš„çµæ´»æ€§å’Œæ€§èƒ½è¡¨ç°å¯èƒ½æ›´å ä¼˜ã€‚ä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒSwiftUI çš„å£°æ˜å¼è¯­æ³•å’Œç»„åˆç‰¹æ€§ï¼Œä½¿å…¶å¤©ç„¶æ›´é€‚åˆæ„å»ºç»Ÿä¸€ä¸”æ˜“ç»´æŠ¤çš„ Design Systemã€‚&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>iOS æ¶æ„ä¹‹å¦ä¸€ç§ä¾èµ–æ³¨å…¥çš„æ€è·¯</title>
      <link>http://localhost:1313/posts/swift_dependency_injection/</link>
      <pubDate>Tue, 15 Mar 2022 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/posts/swift_dependency_injection/</guid>
      <description>
        
          
          
          
        
        
        &lt;p&gt;åœ¨ iOS ä¸šåŠ¡å¼€å‘è¿‡ç¨‹ç»å¸¸é¢å¯¹ç½‘ç»œè¯·æ±‚ï¼Œæ•°æ®æŒä¹…åŒ–è¿™æ ·å¸¦æœ‰å‰¯ä½œç”¨çš„æ“ä½œã€‚ä¸ºäº†èƒ½å¤Ÿåœ¨æµ‹è¯•ä¸­ mock è¿™äº›æ“ä½œï¼Œé€šå¸¸çš„åšæ³•å°±æ˜¯æŠ½è±¡ä¸€å±‚ protocol å‡ºæ¥ï¼Œç„¶åç¼–å†™ä¸åŒçš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚éœ€è¦å¤„ç†ä¸€ä¸ªç®€é™‹çš„æ³¨å†Œä¸šåŠ¡ï¼ˆç¤ºä¾‹çœç•¥äº†ä¸€ç‚¹ç»†èŠ‚ï¼‰ï¼Œéœ€è¦ç”¨æˆ·è¾“å…¥ä¿¡æ¯åå‘é€ç½‘ç»œè¯·æ±‚ï¼ŒæˆåŠŸåè¿”å›å¯¹åº”ç”¨æˆ·å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆä¸ºç½‘ç»œè¯·æ±‚å®šä¹‰ä¸€ä¸ª protocolï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;protocol&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SignUpRepositoryProtocol&lt;/span&gt;: RepositoryProtocol {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;handleSignUp&lt;/span&gt;(name: String, email: String, pwd: String) -&amp;gt; AnyPublisher&amp;lt;User, Error&amp;gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯¹å…¶è¿›è¡Œå®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SignUpRepository&lt;/span&gt;: SignUpRepositoryProtocol {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;handleSignUp&lt;/span&gt;(name: String, email: String, pwd: String) -&amp;gt; AnyPublisher&amp;lt;User, Error&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        client(.signUp(name, email, pwd))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            .map
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            .decode
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            .eraseToAnyPublisher()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å°†å…¶æ³¨å…¥åˆ°  &lt;code&gt;ViewModel&lt;/code&gt; æˆ–æ˜¯ &lt;code&gt;Interactor&lt;/code&gt; ä¸­ï¼ˆå–å†³äºä½ é‡‡å–çš„æ¶æ„æ˜¯ä»€ä¹ˆ :p ï¼‰ï¼Œå¹¶ä¸”è°ƒç”¨å¯¹åº”æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SignUpViewModel&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;enum&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;State&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; loading
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; success
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; failed
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; repository: SignUpRepositoryPortocol
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; state: State = .loading
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;(repository: SignUpRepositoryPortocol) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.repository = repository
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;onSubmit&lt;/span&gt;(name: String, email: String, pwd: String) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        repository.hanldeSignUp(name: name, email: email, pwd: pwd)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          .sink {[&lt;span style=&#34;color:#66d9ef&#34;&gt;weak&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;] completion &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; completion {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .failure: 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.?state = .failed
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .finished: &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          } receiveValue: {[&lt;span style=&#34;color:#66d9ef&#34;&gt;weak&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;] result &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;?.state = .success
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          }.store(&lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;: &amp;amp;bag)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”±æ­¤å¦‚æœéœ€è¦æµ‹è¯•å¯¹åº”çš„æ–¹æ³•ï¼Œåªéœ€è¦å†åˆ›å»ºä¸€ä»½  &lt;code&gt;MockSignUpRepository&lt;/code&gt; çš„å®ç°å³å¯ï¼Œæ¯”å¦‚æƒ³è¦æµ‹è¯•æ³¨å†ŒæˆåŠŸæˆ–å¤±è´¥åœºæ™¯ä¸‹çš„å¤„ç†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MockSignUpRepository&lt;/span&gt;: SignUpRepositoryPortocol {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; shouldSignUpSuccess: Bool
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;handleSignUp&lt;/span&gt;(name: String, email: String, pwd: String) -&amp;gt; AnyPublisher&amp;lt;User, Error&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; shouldSignUpSuccess {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            Just(User.mock)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                .mapError{ &lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; SignUpError.someError }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                .eraseToAnyPublisher()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            Fail(error: SignUpError.someError)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                .eraseToAnyPublisher() 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ç¼–å†™æµ‹è¯•çš„æ—¶å€™ï¼Œä¼ å…¥ &lt;code&gt;SignUpViewModel&lt;/code&gt; çš„ä¾èµ–æ›¿æ¢æˆæˆ‘ä»¬æƒ³è¦æµ‹è¯•çš„ Mock å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;shouldSignUpSuccessWhenXXX&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Given&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; sut = SignUpViewModel(repository: MockSignUpSuccessRepository(shouldSignUpSuccess: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// When&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sut.onSubmit(...) &lt;span style=&#34;color:#75715e&#34;&gt;// åˆæ³•è¾“å…¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    XCTAssertEqual(sut.state, .success)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;shouldSignUpFailWhenXXX&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Given&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; sut = SignUpViewModel(repository: MockSignUpSuccessRepository(shouldSignUpSuccess: &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// When&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sut.onSubmit(...) &lt;span style=&#34;color:#75715e&#34;&gt;// éæ³•è¾“å…¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    XCTAssertEqual(sut.state, .failed)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ—¶å€™ä¼¼ä¹ä¸€åˆ‡éƒ½å¾ˆç¾å¥½ï¼Œä½†ç°åœ¨å†è¡¥å……ä¸€äº›ä¸šåŠ¡éœ€æ±‚ï¼Œå¦‚æœéœ€è¦è¿”å›ä¸åŒçš„é”™è¯¯ç±»å‹æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚ç”¨æˆ·åé”™è¯¯ï¼Œé‚£å°±éœ€è¦é¢å¤–çš„å¸ƒå°”å€¼æ¥è¡¨ç¤ºï¼›å†æ¯”å¦‚é‚®ç®±é”™è¯¯ï¼Œé‚£åˆéœ€è¦å¢åŠ æ–°çš„å¸ƒå°”å€¼ã€‚è€Œè¿™è¿˜ä»…ä»…åªæ˜¯ä¸€ä¸ªæ–¹æ³•çš„å‡ ä¸ªåˆ†æ”¯é€»è¾‘å¤„ç†ã€‚å½“å‡ºç°è¾ƒå¤šçš„é€»è¾‘åˆ†æ”¯ä¹‹åï¼Œå¦‚æœæˆ‘ä»¬å®é™…çš„ä¸šåŠ¡å†å‘ç”Ÿå˜åŠ¨éœ€è¦é‡æ„ï¼Œé‚£è¿˜å¾—å»å¯¹ Mock ç±»ä¹Ÿè¿›è¡Œé‡æ„ï¼ŒåŒæ—¶è¿˜éœ€è¦ç¡®ä¿è¿™äº›æ§åˆ¶é€»è¾‘åˆ†æ”¯çš„å¸ƒå°”å€¼ä¹Ÿå¾—åˆ°äº†æ­£ç¡®çš„æ›´æ–°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; sut = SignUpViewModel(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    repository: MockSignUpSuccessRepository(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        shouldSignUpSuccess: &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;, 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        shouldShowUsernameError: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        shouldShowEmailError: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        shouldUsernamePassValidation: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        shouldEmailPassValidation: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// ...ğŸ˜±&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ—¶å€™å°±å¯ä»¥ä»‹ç»å¦ä¸€ç§ä¾èµ–æ³¨å…¥æ–¹å¼äº†ã€‚é¦–å…ˆå®šä¹‰ä¸€ä¸ª &lt;code&gt;Repository&lt;/code&gt; å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±åƒä¹‹å‰çš„ &lt;code&gt;Repository&lt;/code&gt; ä¸€æ ·ï¼ŒåŒºåˆ«æ˜¯ç½‘ç»œè¯·æ±‚é€šè¿‡ä¸€ä¸ªå±æ€§æ¥æŒæœ‰ï¼ŒåŒæ—¶ä¼šæä¾›ä¸€ä¸ªæ ‡è®°ä¸º private çš„é»˜è®¤å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Repository&lt;/span&gt; {  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; handleSignUp = handleSignUp(name:, email:, pwd:)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;handleSignUp&lt;/span&gt;(name: String, email: String, pwd: String) -&amp;gt; AnyPublisher&amp;lt;User, Error&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    client(.signUp(name, email, pwd))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        .map
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        .decode
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        .eraseToAnyPublisher()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åå°†è¿™ä¸ª &lt;code&gt;Repository&lt;/code&gt; å®ä¾‹æ”¾åˆ°ä¸€ä¸ª &lt;code&gt;Environment&lt;/code&gt; å¯¹è±¡ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Environment&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; repo = Repository()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åŒæ—¶æ›¿æ¢ ViewModel ä¸­ä¹‹å‰å¯¹ &lt;code&gt;Repository&lt;/code&gt; çš„å¼•ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SignUpViewModel&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;enum&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;State&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; loading
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; success
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; failed
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// let repository: SignUpRepositoryPortocol&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; current: Environment &lt;span style=&#34;color:#75715e&#34;&gt;// ğŸ‘ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; state: State = .loading
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;(current: Environment) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.current = current &lt;span style=&#34;color:#75715e&#34;&gt;// ğŸ‘ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;onSubmit&lt;/span&gt;(name: String, email: String, pwd: String) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        current.repo.hanldeSignUp(name, email, pwd) &lt;span style=&#34;color:#75715e&#34;&gt;// ğŸ‘ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          .sink { completion &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; completion {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .failure: 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.state = .failed
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .finished: &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          } receiveValue: {[&lt;span style=&#34;color:#66d9ef&#34;&gt;weak&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;] result &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;?.state = .success
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          }.store(&lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;: &amp;amp;bag)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»£ç å‡ ä¹å’Œä¹‹å‰ç›¸åŒï¼Œä½†ä¿æŒäº†æ›´é«˜çš„å¯æ›¿æ¢æ€§ï¼Œæ€ä¹ˆä½“ç°çš„å‘¢ï¼Ÿéœ€è¦ mock ç½‘ç»œè¯·æ±‚ æ—¶ï¼Œå¯ä»¥ç»™ Repository åˆ›å»ºä¸€ä¸ª extensionï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;extension&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Repository&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; mock = Repository(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        handleSignUp: Just(User.mock)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                          .mapError{ &lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; SignUpError.someError }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                          .eraseToAnyPublisher()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶ååœ¨æµ‹è¯•ä»£ç æ„å»º ViewModel çš„æ—¶å€™å°±å¯ä»¥å°† Mock ä¼ é€’è¿›å»ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;shouldSignUpSuccessWhenXXX&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Given&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; sut = SignUpViewModel(current: Environment(repo: Repository.mock))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// When&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sut.onSubmit(...) &lt;span style=&#34;color:#75715e&#34;&gt;// åˆæ³•è¾“å…¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    XCTAssertEqual(sut.state, .success)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯¹äºæ–¹æ³•å¤šåˆ†æ”¯çš„é€»è¾‘ï¼Œåˆ™å¯ä»¥ç‹¬ç«‹å®ç°ä¸€ä»½ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ›å»ºæ•´ä¸ª  &lt;code&gt;MockRepository&lt;/code&gt;  ç±»æˆ–è€…æ˜¯ç”¨ä¸€äº›å˜é‡æ¥æ§åˆ¶åˆ†æ”¯é€»è¾‘ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;shouldSignUpFailWhenXXX&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Given&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; sut = SignUpViewModel(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        current: Environment(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            repo: Repository(handleSignUp: 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                Fail(error: SignUpError.someError).eraseToAnyPublisher()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// When&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sut.onSubmit(...) &lt;span style=&#34;color:#75715e&#34;&gt;// éæ³•è¾“å…¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    XCTAssertEqual(sut.state, .failed)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ç§æ–¹å¼æ¥æ³¨å…¥ä¾èµ–çš„ä¼˜åŠ¿åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸éœ€è¦åƒ protocol é‚£æ ·å†™å¤ªå¤šæ¨¡ç‰ˆä»£ç &lt;/li&gt;
&lt;li&gt;mock çš„é€»è¾‘åˆ†æ”¯å¾ˆå®¹æ˜“å¯ä»¥å®ç°ç›¸äº’ç‹¬ç«‹çš„ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;ä¾èµ–çš„å‰¯ä½œç”¨ä¼šæ›´å®¹æ˜“ mockï¼Œç‰¹åˆ«æ˜¯ç³»ç»Ÿç±»&lt;/li&gt;
&lt;/ul&gt;

        
        </description>
    </item>
    
    <item>
      <title>Swift çŠ¶æ€ç®¡ç† â€”â€” å¦‚ä½•æ‹†åˆ†åºå¤§çš„ reducer</title>
      <link>http://localhost:1313/posts/combining_reducers/</link>
      <pubDate>Sun, 16 Jan 2022 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/posts/combining_reducers/</guid>
      <description>
        
          
          
          
        
        
        &lt;p&gt;å› ä¸ºé¡¹ç›®éœ€è¦ä½¿ç”¨ SwiftUIï¼Œæƒ³èµ·æ¥ä¹‹å‰ä¹°è¿‡å–µç¥çš„ &lt;a href=&#34;https://objccn.io/products/swift-ui&#34;&gt;ã€ŠSwiftUI ä¸ Combine ç¼–ç¨‹ã€‹&lt;/a&gt; ã€‚ä¹¦ä¸­ä»‹ç»äº† &lt;a href=&#34;https://redux.js.org&#34;&gt;Redux&lt;/a&gt; è¿™ä¸€åœ¨ Web å‰ç«¯é¢†åŸŸå¹¿æ³›è¢«éªŒè¯è¿‡çš„æ•°æ®ç®¡ç†æ¨¡å¼æ˜¯å¦‚ä½•é€šè¿‡ Swift æ¥å®ç°çš„ï¼Œéå¸¸æ¨è SwiftUI åˆè§è€…é˜…è¯»ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­è¿˜äº§ç”Ÿäº†ä¸€ä¸ªç–‘é—®ï¼Œå¦‚æœ reducer è¶Šæ¥è¶Šå¤§ï¼Œæœ‰ä»€ä¹ˆæ›´  â€œswiftâ€ çš„åŠæ³•èƒ½è§£å†³è¿™ä¸€é—®é¢˜å‘¢ï¼Ÿï¼ˆåœ¨ Redux.js ä¸­çš„åŸç”Ÿè§£å†³æ–¹æ¡ˆæ˜¯ &lt;a href=&#34;https://redux.js.org/usage/structuring-reducers/beyond-combinereducers&#34;&gt;&lt;code&gt;combineReducers&lt;/code&gt;&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;æ‹†åˆ†-reducer&#34;&gt;
  æ‹†åˆ† Reducer
  &lt;a href=&#34;#%e6%8b%86%e5%88%86-reducer&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆçœ‹çœ‹é—®é¢˜åœ¨ä»£ç ä¸­çš„è¡¨ç°æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œå‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ª reducerï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;appReducer&lt;/span&gt;(appState: &lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; AppState, action: AppAction) -&amp;gt; Void {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; action {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .emailValid(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; isValid):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.settings.isEmailValid = isValid
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .register(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email, &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; password):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.settings.loginUser = User(email, password)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .login(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email, &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; password):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.settings.loginUser = User(email, password)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .logout:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.settings.loginUser = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .loadPokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; result):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.pokemonList.pokemons = result
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .favoratePokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; pokemon):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.favoritePokemons.append(pokemon)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .removeFavoritePokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; pokemon):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; index = appState.favoritePokemons.indexOf(pokemon)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.favoritePokemons.remove(at: index)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åº”ç”¨çš„ action ä¸»è¦åŒ…å«ä¸‰ä¸ªæ¨¡å—ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è´¦å·ç™»å½•æ³¨å†Œæ³¨é”€&lt;/li&gt;
&lt;li&gt;å¯¹ç¥å¥‡å®è´æ•°æ®è¿›è¡ŒåŠ è½½&lt;/li&gt;
&lt;li&gt;å¤„ç†å¯¹ç¥å¥‡å®è´æ•°æ®çš„æ”¶è—å’Œå–æ¶ˆæ”¶è—&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»è¿™æ®µä»£ç æˆ‘ä»¬å¾ˆå¿«å°±èƒ½å‘ç°ï¼Œå³ä½¿åªæ˜¯éå¸¸ç®€å•çš„ç¤ºä¾‹ä¹Ÿå·²ç»åŒ…å«äº†ä¸çŸ­çš„ä»£ç äº†ã€‚è¿™é‡Œè¿˜çœç•¥æ‰äº†å¤„ç†çŠ¶æ€æ—¶å¯èƒ½è¿˜éœ€è¦çš„å¼‚æ­¥ action çš„å¤„ç†ï¼ˆæ•°æ®åŠ è½½ç­‰ï¼‰ã€‚è¿™è¿˜ä»…ä»…åªæœ‰ä¸¤ä¸ªéå¸¸ç®€å•çš„ç•Œé¢çŠ¶æ€ï¼Œå½“é¢å¯¹çœŸå®çš„ app æ‰€éœ€è¦å¤„ç†çš„æ•°åä¸ªé¡µé¢çŠ¶æ€ä¼šæ›´ææ€–ã€‚&lt;/p&gt;
&lt;p&gt;å°† reducer æ‹†åˆ†æˆå¦‚ä¸‹ä¸‰ä¸ªç‹¬ç«‹ reducerï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;accountReducer&lt;/span&gt;(appState: &lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; AppState, action: AppAction) -&amp;gt; Void {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; action {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .emailValid(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; isValid):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.settings.isEmailValid = isValid
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .register(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email, &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; password):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.settings.loginUser = User(email, password)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .login(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email, &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; password):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.settings.loginUser = User(email, password)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .logout:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.settings.loginUser = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pokemonListReducer&lt;/span&gt;(appState: &lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; AppState, action: AppAction) -&amp;gt; Void {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; action {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .loadPokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; result):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.pokemonList.pokemons = result
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;favoritePokemonReducer&lt;/span&gt;(appState: &lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; AppState, action: AppAction) -&amp;gt; Void {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; action {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .favoratePokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; pokemon):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.favoritePokemons.append(pokemon)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .removeFavoritePokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; pokemon):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; index = appState.favoritePokemons.indexOf(pokemon)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.favoritePokemons.remove(at: index)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å› ä¸ºå¯¹ reducer çš„æ•°é‡å¹¶ä¸ç¡®å®šï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨å¯å˜å‚æ•°æ¥æ„å»º &lt;code&gt;combine&lt;/code&gt; æ–¹æ³•ï¼Œå¯¹ä¼ å…¥çš„ reducer è¿›è¡Œéå†è°ƒç”¨å¤„ç† appStateã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;combine&lt;/span&gt;&amp;lt;Value, Action&amp;gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; reducers: (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; Value, Action) -&amp;gt; Void...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;) -&amp;gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; Value, Action) -&amp;gt; Void {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; { value, action &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; reducer &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; reducers {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      reducer(&amp;amp;value, action)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; appReducer = combine(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  accountReducer,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  pokemonListReducer,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  favoritePokemonReducer
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®Œæˆï¼Œæˆ‘ä»¬çš„å·¨å¤§ reducer è¢«æ‹†åˆ†æˆäº†ç‹¬ç«‹çš„ reducerï¼Œå†é€šè¿‡è‡ªå·±å®ç°çš„ combine æ–¹æ³•å®Œæˆäº†ç»„è£…ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éš”ç¦»-reducer-æ•°æ®&#34;&gt;
  éš”ç¦» reducer æ•°æ®
  &lt;a href=&#34;#%e9%9a%94%e7%a6%bb-reducer-%e6%95%b0%e6%8d%ae&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ä½†ä»”ç»†è§‚çœ‹ä»£ç è¿˜ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæ¯ä¸ª reducer éƒ½åªéœ€è¦å¤„ç† &lt;code&gt;appState&lt;/code&gt; ä¸Šçš„éƒ¨åˆ†æ•°æ®ï¼Œæ¯”å¦‚ &lt;code&gt;pokemonListReducer&lt;/code&gt; æ˜æ˜åªæ“ä½œäº† &lt;code&gt;appState.pokemonList&lt;/code&gt;ï¼Œæˆ‘ä»¬å´æŠŠæ•´ä¸ª state éƒ½ä¸¢ç»™äº†å®ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pokemonListReducer&lt;/span&gt;(appState: &lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; AppState, action: AppAction) -&amp;gt; Void {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; action {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .loadPokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; result):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        appState.pokemonList.pokemons = result
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¼šå¢åŠ ä»£ç ç»´æŠ¤ä¸Šçš„å›°éš¾ï¼Œä¸ç†Ÿæ‚‰ä»£ç çš„äººåœ¨ä¸æµè§ˆæ•´ä¸ª reducer ä¹‹å‰ï¼Œå¾ˆéš¾çŸ¥é“è¿™ä¸ª reducer åˆ°åº•æ“ä½œäº†å“ªäº›æ•°æ®ã€‚æ›´ç†æƒ³çš„ reducer å¯èƒ½é•¿è¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pokemonListReducer&lt;/span&gt;(value: &lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; PokemonList, action: AppAction) -&amp;gt; Void {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; action {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; .loadPokemon(&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; result):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        value.pokemons = result &lt;span style=&#34;color:#75715e&#34;&gt;// ğŸ‘ˆ  åªèƒ½æ“ä½œ pokemonList&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åªæ˜¯è¿™æ ·æ”¹åŠ¨ä¹‹åï¼Œä¹‹å‰å®šä¹‰çš„ combine å°±æ— æ³•ç¼–è¯‘é€šè¿‡ï¼ŒpokemonListReducer çš„ç­¾åå·²ç»ä¸ç¬¦åˆ combine çš„è¦æ±‚äº†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Cannot convert value of type â€˜(inout PokemonList, AppAction) -&amp;gt; ()â€™ to expected argument&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;æ‹‰å›&#34;&gt;
  æ‹‰å›
  &lt;a href=&#34;#%e6%8b%89%e5%9b%9e&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;è§£å†³è¿™ä¸ªé—®é¢˜å¯ä»¥å¼•å…¥ä¸€ä¸ªæ•°å­¦ä¸­çš„æ¦‚å¿µ â€”â€” æ‹‰å›ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¼•ç”¨ wikipedia ä¸Šçš„è§£é‡Šï¼šâ€œç®€å•åœ°è¯´ï¼Œè®¾ &lt;em&gt;f&lt;/em&gt; æ˜¯ä¸€ä¸ªå˜é‡ &lt;em&gt;y&lt;/em&gt; çš„å‡½æ•°ï¼Œè¿™é‡Œ &lt;em&gt;y&lt;/em&gt; è‡ªèº«åˆæ˜¯å¦ä¸€ä¸ªå˜é‡ &lt;em&gt;x&lt;/em&gt; çš„å‡½æ•°ï¼Œé‚£ä¹ˆ &lt;em&gt;f&lt;/em&gt; å¯ä»¥å†™æˆ &lt;em&gt;x&lt;/em&gt; çš„å‡½æ•°ï¼Œè¿™å³ &lt;em&gt;f&lt;/em&gt; è¢«å‡½æ•° &lt;em&gt;y&lt;/em&gt;(&lt;em&gt;x&lt;/em&gt;) æ‹‰å›ã€‚â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨ reducer ä¸­çš„ä¾‹å­é‡Œï¼Œä¹Ÿå¯ä»¥å¥—ç”¨ç›¸åŒçš„æ¦‚å¿µã€‚åªéœ€è¦å°†æŒæœ‰äº†éƒ¨åˆ†çŠ¶æ€æ•°æ®çš„ reducerï¼Œè½¬åŒ–æˆä¸€ä¸ªæ‹¥æœ‰ç€å…¨éƒ¨çŠ¶æ€æ•°æ®çš„ reducer ç­¾åå³å¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pullback&lt;/span&gt;&amp;lt;LocalValue, GlobalValue, Action&amp;gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; reducer: @escaping (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; LocalValue, Action) -&amp;gt; Void,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;: @escaping (GlobalValue) -&amp;gt; LocalValue,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;: @escaping (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; GlobalValue, LocalValue) -&amp;gt; Void
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;) -&amp;gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; GlobalValue, Action) -&amp;gt; Void {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;  { globalValue, action &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; localValue = &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;(globalValue)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    reducer(&amp;amp;localValue, action)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;(&amp;amp;globalValue, localValue)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯¥å‡½æ•°åŒ…å«ä¸‰ä¸ªå…¥å‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨äºå¤„ç†å±€éƒ¨çŠ¶æ€çš„ reducer&lt;/li&gt;
&lt;li&gt;æä¾›ä»å…¨éƒ¨çŠ¶æ€ä¸­æå–éƒ¨åˆ†çŠ¶æ€çš„å‡½æ•°&lt;/li&gt;
&lt;li&gt;æä¾›å°†å±€éƒ¨çŠ¶æ€è®¾ç½®åˆ°å…¨éƒ¨çŠ¶æ€ä¸­çš„å‡½æ•°&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªå¯ä»¥ç”¨æ¥è½¬åŒ–ç”¨äºå¤„ç†å±€éƒ¨çŠ¶æ€ reducer åˆ°å…¨éƒ¨çŠ¶æ€ reducer çš„ pullback å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pullback(pokemonListReducer,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;         &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;: { $0.pokemonList },
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;         &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;: { $0.pokemonList = $1 }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;         )
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†è¿›ä¸€æ­¥è¿˜å¯ä»¥é€šè¿‡ keyPath æ¥ä¼˜åŒ– pullback å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pullback&lt;/span&gt;&amp;lt;LocalValue, GlobalValue, Action&amp;gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; reducer: @escaping (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; LocalValue, Action) -&amp;gt; Void,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  value: WritableKeyPath&amp;lt;GlobalValue, LocalValue&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;) -&amp;gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;inout&lt;/span&gt; GlobalValue, Action) -&amp;gt; Void {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; { globalValue, action &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    reducer(&amp;amp;globalValue[keyPath: value], action)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pullback(pokemonListReducer, value: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;AppState.pokemonList)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·å°±å®ç°äº† reducer çš„æ‹†åˆ†ä»¥åŠå¯¹å¤„ç†çŠ¶æ€çš„éš”ç¦»&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; appReducer = combine(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  pullback(accountReducer, value: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.pokemonList),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  pullback(pokemonListReducer, value: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.settings),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  pullback(favoritePokemonReducer, value: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.favoritePokemons)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;
  å‚è€ƒèµ„æ–™
  &lt;a href=&#34;#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99&#34; class=&#34;h-anchor&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://objccn.io/products/swift-ui&#34;&gt;ObjC ä¸­å›½ - SwiftUI ä¸ Combine ç¼–ç¨‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.pointfree.co/collections/composable-architecture/reducers-and-stores/ep69-composable-state-management-state-pullbacks#downloads&#34;&gt;Point Free - StateÂ Pullbacks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.swiftbysundell.com/articles/the-power-of-key-paths-in-swift/&#34;&gt;Swift by Sundell - The power of key paths in Swift&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

        
        </description>
    </item>
    
  </channel>
</rss>